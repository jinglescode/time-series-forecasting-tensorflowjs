let sma_vec;
let grouped_data;
let sma_window = 20;
let trainingsize = 90;
let n_epochs = 25;
let learningrate = 0.01;
let n_hiddenlayers = 4;

$(document).ready(function(){
   $('select').formSelect();
});

function onClickLoadData() {
   $("#btn_train_loading").show();

   let file = document.getElementById("prediction-data-upload").files[0];

   Papa.parse(file, {
      complete: function (results) {
         CleanRawData(results.data);
      }
   });
}

function CleanRawData(raw_data) {
   /*Current Format
      raw_data = 
         [[ "date2", "6.17" ],
         [ "date2", "6.17" ],
         [ "date1", "12.34" ],
         [ "date3", "12.34" ]]
    * Desired Format
      grouped_data = {
         { timestamp: "date1", price: 12.34 },
         { timestamp: "date2", price: 12.34 },
         { timestamp: "date3", price: 12.34 }
      }
   */

   // Remove headers
   let headers = raw_data[0];
   raw_data.shift();

   // Sort by date
   raw_data.sort(function (a, b) {
      if (a[0] == b[0])
         return 0;
      if (a[0] < b[0])
         return -1;
      if (a[0] > b[0])
         return 1;
   });

   // Group by date
   let date = "";
   let revenue = 0;
   grouped_data = [];
   raw_data.forEach(function (row, index) { // Currently train.csv has only two columns. Will have to adjust indices so they refer to the columns in the whole report
      if (date != row[0]) {
         if (index > 0) {
            revenue = revenue ? revenue : 0
            grouped_data.push({ timestamp: date, price: revenue });
			}
         date = row[0];
         revenue = parseInt(row[1]);
      }
		else {
         revenue += parseInt(row[1])
      }
		if (index == raw_data.length - 1) {
         revenue = revenue ? revenue : 0
         grouped_data.push({ timestamp: date, price: revenue });
		}
   });

   // Graph result
   GraphCleanData(grouped_data, headers);
}

function GraphCleanData(data, headers) {
   $("#btn_train_loading").hide();
   $("#div_container_linegraph").show();

   if (data){

      title = "Shipment Revenue Over Time";
      $("#div_linegraph_data_title").text(title);

      if(data.length > 0){
         let timestamps = data.map(function (val) { return val['timestamp']; });
         let revenues = data.map(function (val) { return val['price']; });

         let graph_plot = document.getElementById('div_linegraph_data');
         Plotly.newPlot(graph_plot, [{
            x: timestamps, y: revenues,
            name: "Shipment Revenue",
            xaxis: {title: headers[0]},
            yaxis: {title: headers[1]}
         }], { margin: { t: 0 } });
      }

   }
   displayTrainingData(data);
}

function displayTrainingData(data) {
   $("#div_container_trainingdata").show();

   sma_vec = ComputeSMA(data, sma_window);
   /* [{ 
         avg: 12.34, 
         set: [
               {timestamp: "date1", price: 12.34},
               {timestamp: "date2", price: 12.34},
               {timestamp: "date3", price: 12.34}
               ]
         }] */

  let set = sma_vec.map(function (val) { return val['set']; });
   let data_output = "";
   for (let index = 0; index < 10; index++) {
      data_output += "<tr><td width=\"20px\">" + (index + 1) +
         "</td><td>[" + set[index].map(function (val) {
            return (Math.round(val['price'] * 10000) / 10000).toString();
         }).toString() +
         "]</td><td>" + sma_vec[index]['avg'] + "</td></tr>";
   }

   data_output = "<table class='striped'>" +
   "<thead><tr><th scope='col'>#</th>" +
   "<th scope='col'>Input (X)</th>" +
   "<th scope='col'>Label (Y)</th></thead>" +
   "<tbody>" + data_output + "</tbody>" +
   "</table>";

   $("#div_trainingdata").html(data_output);

   $("#div_container_train").show();
   $("#div_container_trainfirst").hide();
}



async function onClickTrainModel(){

  let epoch_loss = [];

  $("#btn_draw_trainmodel").hide();
  $("#div_container_training").show();

  document.getElementById("div_traininglog").innerHTML = "";

  let inputs = sma_vec.map(function(inp_f){
    return inp_f['set'].map(function(val) { return val['price']; })
  });
  let outputs = sma_vec.map(function(outp_f) { return outp_f['avg']; });

  

  inputs = inputs.slice(0, Math.floor(trainingsize / 100 * inputs.length));
  outputs = outputs.slice(0, Math.floor(trainingsize / 100 * outputs.length));

   console.log('inputs', inputs)
   console.log('outputs', outputs)

  let callback = function(epoch, log) {
    let logHtml = document.getElementById("div_traininglog").innerHTML;
    logHtml = "<div>Epoch: " + (epoch + 1) + " (of "+ n_epochs +")" +
      ", loss: " + log.loss +
      // ", difference: " + (epoch_loss[epoch_loss.length-1] - log.loss) +
      "</div>" + logHtml;

    epoch_loss.push(log.loss);

    document.getElementById("div_traininglog").innerHTML = logHtml;
    document.getElementById("div_training_progressbar").style.width = Math.ceil(((epoch + 1) * (100 / n_epochs))).toString() + "%";
    document.getElementById("div_training_progressbar").innerHTML = Math.ceil(((epoch + 1) * (100 / n_epochs))).toString() + "%";

    let graph_plot = document.getElementById('div_linegraph_trainloss');
    Plotly.newPlot( graph_plot, [{x: Array.from({length: epoch_loss.length}, (v, k) => k+1), y: epoch_loss, name: "Loss" }], { margin: { t: 0 } } );
  };

  //console.log('train X', inputs)
  //console.log('train Y', outputs)
   result = await trainModel(inputs, outputs, sma_window, n_epochs, learningrate, n_hiddenlayers, callback);

  let logHtml = document.getElementById("div_traininglog").innerHTML;
  logHtml = "<div>Model train completed</div>" + logHtml;
  document.getElementById("div_traininglog").innerHTML = logHtml;

  $("#div_container_validate").show();
  $("#div_container_validatefirst").hide();
  $("#div_container_predict").show();
  $("#div_container_predictfirst").hide();

}

function onClickValidate() {

  $("#div_container_validating").show();
  $("#load_validating").show();
  $("#btn_validation").hide();

  let inputs = sma_vec.map(function(inp_f) {
   return inp_f['set'].map(function (val) { return val['price']; });
  });

  // validate on training
  let val_train_x = inputs.slice(0, Math.floor(trainingsize / 100 * inputs.length));
  // let outputs = sma_vec.map(function(outp_f) { return outp_f['avg']; });
  // let outps = outputs.slice(0, Math.floor(trainingsize / 100 * inputs.length));
  console.log('val_train_x', val_train_x)
  let val_train_y = makePredictions(val_train_x, result['model']);
  console.log('val_train_y', val_train_y)

  // validate on unseen
  let val_unseen_x = inputs.slice(Math.floor(trainingsize / 100 * inputs.length), inputs.length);
  console.log('val_unseen_x', val_unseen_x)
  let val_unseen_y = makePredictions(val_unseen_x, result['model']);
  console.log('val_unseen_y', val_unseen_y)

  let timestamps_a = grouped_data.map(function (val) { return val['timestamp']; });
  let timestamps_b = grouped_data.map(function (val) {
    return val['timestamp'];
  }).splice(sma_window, (grouped_data.length - Math.floor((100-trainingsize) / 100 * grouped_data.length))); //.splice(sma_window, grouped_data.length);
  // let timestamps_c = grouped_data.map(function (val) {
  //   return val['timestamp'];
  // }).splice(sma_window + Math.floor(trainingsize / 100 * val_unseen_x.length), grouped_data.length);
  let timestamps_c = grouped_data.map(function (val) {
    return val['timestamp'];
  }).splice(sma_window + Math.floor(trainingsize / 100 * inputs.length), inputs.length);

  let sma = sma_vec.map(function (val) { return val['avg']; });
  let prices = grouped_data.map(function (val) { return val['price']; });
  sma = sma.slice(0, Math.floor(trainingsize / 100 * sma.length));
  console.log('sma', sma)

  let graph_plot = document.getElementById('div_validation_graph');
  Plotly.newPlot( graph_plot, [{ x: timestamps_a, y: prices, name: "Actual Price" }], { margin: { t: 0 } } );
  Plotly.plot( graph_plot, [{ x: timestamps_b, y: sma, name: "Training Label (SMA)" }], { margin: { t: 0 } } );
  Plotly.plot( graph_plot, [{ x: timestamps_b, y: val_train_y, name: "Predicted (train)" }], { margin: { t: 0 } } );
  Plotly.plot( graph_plot, [{ x: timestamps_c, y: val_unseen_y, name: "Predicted (test)" }], { margin: { t: 0 } } );

  $("#load_validating").hide();
}

async function onClickPredict() {

  $("#div_container_predicting").show();
  $("#load_predicting").show();
  $("#btn_prediction").hide();

  let inputs = sma_vec.map(function(inp_f) {
   return inp_f['set'].map(function (val) { return val['price']; });
  });
  let pred_X = [inputs[inputs.length-1]];
  pred_X = pred_X.slice(Math.floor(trainingsize / 100 * pred_X.length), pred_X.length);
  let pred_y = makePredictions(pred_X, result['model']);

  let timestamps_d = grouped_data.map(function (val) {
    return val['timestamp'];
  }).splice((grouped_data.length - sma_window), grouped_data.length);

  // date
  let last_date = new Date(timestamps_d[timestamps_d.length-1]);
  let add_days = 7;
  last_date.setDate(last_date.getDate() + add_days);
  let next_date = await formatDate(last_date.toString());
  let timestamps_e = [next_date];

  let graph_plot = document.getElementById('div_prediction_graph');
  Plotly.newPlot( graph_plot, [{ x: timestamps_d, y: pred_X[0], name: "Latest Trends" }], { margin: { t: 0 } } );
  Plotly.plot( graph_plot, [{ x: timestamps_e, y: pred_y, name: "Predicted Price" }], { margin: { t: 0 } } );

  $("#load_predicting").hide();
}

function ComputeSMA(data, sma_window)
{
  let r_avgs = [], avg_prev = 0;
  for (let i = 0; i <= data.length - sma_window; i++){
    let curr_avg = 0.00, t = i + sma_window;
    for (let k = i; k < t && k <= data.length; k++){
      curr_avg += data[k]['price'] / sma_window;
    }
    r_avgs.push({ set: data.slice(i, i + sma_window), avg: curr_avg });
    avg_prev = curr_avg;
  }
  return r_avgs;
}

function formatDate(date) {
  var d = new Date(date),
      month = '' + (d.getMonth() + 1),
      day = '' + d.getDate(),
      year = d.getFullYear();

  if (month.length < 2) month = '0' + month;
  if (day.length < 2) day = '0' + day;

  return [year, month, day].join('-');
}

function demo(){

  $("#btn_load_demo").hide();
  $("#div_demo_loaded").show();

  // dataset
  $("#div_container_linegraph").show();
  $("#div_container_getdata").hide();
  $("#div_linegraph_data_title").text("Symbol: MSFT (last refreshed 2019-03-08)");

  let timestamps = ["1998-01-09","1998-01-16","1998-01-23","1998-01-30","1998-02-06","1998-02-13","1998-02-20","1998-02-27","1998-03-06","1998-03-13","1998-03-20","1998-03-27","1998-04-03","1998-04-09","1998-04-17","1998-04-24","1998-05-01","1998-05-08","1998-05-15","1998-05-22","1998-05-29","1998-06-05","1998-06-12","1998-06-19","1998-06-26","1998-07-02","1998-07-10","1998-07-17","1998-07-24","1998-07-31","1998-08-07","1998-08-14","1998-08-21","1998-08-28","1998-09-04","1998-09-11","1998-09-18","1998-09-25","1998-10-02","1998-10-09","1998-10-16","1998-10-23","1998-10-30","1998-11-06","1998-11-13","1998-11-20","1998-11-27","1998-12-04","1998-12-11","1998-12-18","1998-12-24","1998-12-31","1999-01-08","1999-01-15","1999-01-22","1999-01-29","1999-02-05","1999-02-12","1999-02-19","1999-02-26","1999-03-05","1999-03-12","1999-03-19","1999-03-26","1999-04-01","1999-04-09","1999-04-16","1999-04-23","1999-04-30","1999-05-07","1999-05-14","1999-05-21","1999-05-28","1999-06-04","1999-06-11","1999-06-18","1999-06-25","1999-07-02","1999-07-09","1999-07-16","1999-07-23","1999-07-30","1999-08-06","1999-08-13","1999-08-20","1999-08-27","1999-09-03","1999-09-10","1999-09-17","1999-09-24","1999-10-01","1999-10-08","1999-10-15","1999-10-22","1999-10-29","1999-11-05","1999-11-12","1999-11-19","1999-11-26","1999-12-03","1999-12-10","1999-12-17","1999-12-23","1999-12-31","2000-01-07","2000-01-14","2000-01-21","2000-01-28","2000-02-04","2000-02-11","2000-02-18","2000-02-25","2000-03-03","2000-03-10","2000-03-17","2000-03-24","2000-03-31","2000-04-07","2000-04-14","2000-04-20","2000-04-28","2000-05-05","2000-05-12","2000-05-19","2000-05-26","2000-06-02","2000-06-09","2000-06-16","2000-06-23","2000-06-30","2000-07-07","2000-07-14","2000-07-21","2000-07-28","2000-08-04","2000-08-11","2000-08-18","2000-08-25","2000-09-01","2000-09-08","2000-09-15","2000-09-22","2000-09-29","2000-10-06","2000-10-13","2000-10-20","2000-10-27","2000-11-03","2000-11-10","2000-11-17","2000-11-24","2000-12-01","2000-12-08","2000-12-15","2000-12-22","2000-12-29","2001-01-05","2001-01-12","2001-01-19","2001-01-26","2001-02-02","2001-02-09","2001-02-16","2001-02-23","2001-03-02","2001-03-09","2001-03-16","2001-03-23","2001-03-30","2001-04-06","2001-04-12","2001-04-20","2001-04-27","2001-05-04","2001-05-11","2001-05-18","2001-05-25","2001-06-01","2001-06-08","2001-06-15","2001-06-22","2001-06-29","2001-07-06","2001-07-13","2001-07-20","2001-07-27","2001-08-03","2001-08-10","2001-08-17","2001-08-24","2001-08-31","2001-09-07","2001-09-10","2001-09-21","2001-09-28","2001-10-05","2001-10-12","2001-10-19","2001-10-26","2001-11-02","2001-11-09","2001-11-16","2001-11-23","2001-11-30","2001-12-07","2001-12-14","2001-12-21","2001-12-28","2002-01-04","2002-01-11","2002-01-18","2002-01-25","2002-02-01","2002-02-08","2002-02-15","2002-02-22","2002-03-01","2002-03-08","2002-03-15","2002-03-22","2002-03-28","2002-04-05","2002-04-12","2002-04-19","2002-04-26","2002-05-03","2002-05-10","2002-05-17","2002-05-24","2002-05-31","2002-06-07","2002-06-14","2002-06-21","2002-06-28","2002-07-05","2002-07-12","2002-07-19","2002-07-26","2002-08-02","2002-08-09","2002-08-16","2002-08-23","2002-08-30","2002-09-06","2002-09-13","2002-09-20","2002-09-27","2002-10-04","2002-10-11","2002-10-18","2002-10-25","2002-11-01","2002-11-08","2002-11-15","2002-11-22","2002-11-29","2002-12-06","2002-12-13","2002-12-20","2002-12-27","2003-01-03","2003-01-10","2003-01-17","2003-01-24","2003-01-31","2003-02-07","2003-02-14","2003-02-21","2003-02-28","2003-03-07","2003-03-14","2003-03-21","2003-03-28","2003-04-04","2003-04-11","2003-04-17","2003-04-25","2003-05-02","2003-05-09","2003-05-16","2003-05-23","2003-05-30","2003-06-06","2003-06-13","2003-06-20","2003-06-27","2003-07-03","2003-07-11","2003-07-18","2003-07-25","2003-08-01","2003-08-08","2003-08-15","2003-08-22","2003-08-29","2003-09-05","2003-09-12","2003-09-19","2003-09-26","2003-10-03","2003-10-10","2003-10-17","2003-10-24","2003-10-31","2003-11-07","2003-11-14","2003-11-21","2003-11-28","2003-12-05","2003-12-12","2003-12-19","2003-12-26","2004-01-02","2004-01-09","2004-01-16","2004-01-23","2004-01-30","2004-02-06","2004-02-13","2004-02-20","2004-02-27","2004-03-05","2004-03-12","2004-03-19","2004-03-26","2004-04-02","2004-04-08","2004-04-16","2004-04-23","2004-04-30","2004-05-07","2004-05-14","2004-05-21","2004-05-28","2004-06-04","2004-06-10","2004-06-18","2004-06-25","2004-07-02","2004-07-09","2004-07-16","2004-07-23","2004-07-30","2004-08-06","2004-08-13","2004-08-20","2004-08-27","2004-09-03","2004-09-10","2004-09-17","2004-09-24","2004-10-01","2004-10-08","2004-10-15","2004-10-22","2004-10-29","2004-11-05","2004-11-12","2004-11-19","2004-11-26","2004-12-03","2004-12-10","2004-12-17","2004-12-23","2004-12-31","2005-01-07","2005-01-14","2005-01-21","2005-01-28","2005-02-04","2005-02-11","2005-02-18","2005-02-25","2005-03-04","2005-03-11","2005-03-18","2005-03-24","2005-04-01","2005-04-08","2005-04-15","2005-04-22","2005-04-29","2005-05-06","2005-05-13","2005-05-20","2005-05-27","2005-06-03","2005-06-10","2005-06-17","2005-06-24","2005-07-01","2005-07-08","2005-07-15","2005-07-22","2005-07-29","2005-08-05","2005-08-12","2005-08-19","2005-08-26","2005-09-02","2005-09-09","2005-09-16","2005-09-23","2005-09-30","2005-10-07","2005-10-14","2005-10-21","2005-10-28","2005-11-04","2005-11-11","2005-11-18","2005-11-25","2005-12-02","2005-12-09","2005-12-16","2005-12-23","2005-12-30","2006-01-06","2006-01-13","2006-01-20","2006-01-27","2006-02-03","2006-02-10","2006-02-17","2006-02-24","2006-03-03","2006-03-10","2006-03-17","2006-03-24","2006-03-31","2006-04-07","2006-04-13","2006-04-21","2006-04-28","2006-05-05","2006-05-12","2006-05-19","2006-05-26","2006-06-02","2006-06-09","2006-06-16","2006-06-23","2006-06-30","2006-07-07","2006-07-14","2006-07-21","2006-07-28","2006-08-04","2006-08-11","2006-08-18","2006-08-25","2006-09-01","2006-09-08","2006-09-15","2006-09-22","2006-09-29","2006-10-06","2006-10-13","2006-10-20","2006-10-27","2006-11-03","2006-11-10","2006-11-17","2006-11-24","2006-12-01","2006-12-08","2006-12-15","2006-12-22","2006-12-29","2007-01-05","2007-01-12","2007-01-19","2007-01-26","2007-02-02","2007-02-09","2007-02-16","2007-02-23","2007-03-02","2007-03-09","2007-03-16","2007-03-23","2007-03-30","2007-04-05","2007-04-13","2007-04-20","2007-04-27","2007-05-04","2007-05-11","2007-05-18","2007-05-25","2007-06-01","2007-06-08","2007-06-15","2007-06-22","2007-06-29","2007-07-06","2007-07-13","2007-07-20","2007-07-27","2007-08-03","2007-08-10","2007-08-17","2007-08-24","2007-08-31","2007-09-07","2007-09-14","2007-09-21","2007-09-28","2007-10-05","2007-10-12","2007-10-19","2007-10-26","2007-11-02","2007-11-09","2007-11-16","2007-11-23","2007-11-30","2007-12-07","2007-12-14","2007-12-21","2007-12-28","2008-01-04","2008-01-11","2008-01-18","2008-01-25","2008-02-01","2008-02-08","2008-02-15","2008-02-22","2008-02-29","2008-03-07","2008-03-14","2008-03-20","2008-03-28","2008-04-04","2008-04-11","2008-04-18","2008-04-25","2008-05-02","2008-05-09","2008-05-16","2008-05-23","2008-05-30","2008-06-06","2008-06-13","2008-06-20","2008-06-27","2008-07-03","2008-07-11","2008-07-18","2008-07-25","2008-08-01","2008-08-08","2008-08-15","2008-08-22","2008-08-29","2008-09-05","2008-09-12","2008-09-19","2008-09-26","2008-10-03","2008-10-10","2008-10-17","2008-10-24","2008-10-31","2008-11-07","2008-11-14","2008-11-21","2008-11-28","2008-12-05","2008-12-12","2008-12-19","2008-12-26","2009-01-02","2009-01-09","2009-01-16","2009-01-23","2009-01-30","2009-02-06","2009-02-13","2009-02-20","2009-02-27","2009-03-06","2009-03-13","2009-03-20","2009-03-27","2009-04-03","2009-04-09","2009-04-17","2009-04-24","2009-05-01","2009-05-08","2009-05-15","2009-05-22","2009-05-29","2009-06-05","2009-06-12","2009-06-19","2009-06-26","2009-07-02","2009-07-10","2009-07-17","2009-07-24","2009-07-31","2009-08-07","2009-08-14","2009-08-21","2009-08-28","2009-09-04","2009-09-11","2009-09-18","2009-09-25","2009-10-02","2009-10-09","2009-10-16","2009-10-23","2009-10-30","2009-11-06","2009-11-13","2009-11-20","2009-11-27","2009-12-04","2009-12-11","2009-12-18","2009-12-24","2009-12-31","2010-01-08","2010-01-15","2010-01-22","2010-01-29","2010-02-05","2010-02-12","2010-02-19","2010-02-26","2010-03-05","2010-03-12","2010-03-19","2010-03-26","2010-04-01","2010-04-09","2010-04-16","2010-04-23","2010-04-30","2010-05-07","2010-05-14","2010-05-21","2010-05-28","2010-06-04","2010-06-11","2010-06-18","2010-06-25","2010-07-02","2010-07-09","2010-07-16","2010-07-23","2010-07-30","2010-08-06","2010-08-13","2010-08-20","2010-08-27","2010-09-03","2010-09-10","2010-09-17","2010-09-24","2010-10-01","2010-10-08","2010-10-15","2010-10-22","2010-10-29","2010-11-05","2010-11-12","2010-11-19","2010-11-26","2010-12-03","2010-12-10","2010-12-17","2010-12-23","2010-12-31","2011-01-07","2011-01-14","2011-01-21","2011-01-28","2011-02-04","2011-02-11","2011-02-18","2011-02-25","2011-03-04","2011-03-11","2011-03-18","2011-03-25","2011-04-01","2011-04-08","2011-04-15","2011-04-21","2011-04-29","2011-05-06","2011-05-13","2011-05-20","2011-05-27","2011-06-03","2011-06-10","2011-06-17","2011-06-24","2011-07-01","2011-07-08","2011-07-15","2011-07-22","2011-07-29","2011-08-05","2011-08-12","2011-08-19","2011-08-26","2011-09-02","2011-09-09","2011-09-16","2011-09-23","2011-09-30","2011-10-07","2011-10-14","2011-10-21","2011-10-28","2011-11-04","2011-11-11","2011-11-18","2011-11-25","2011-12-02","2011-12-09","2011-12-16","2011-12-23","2011-12-30","2012-01-06","2012-01-13","2012-01-20","2012-01-27","2012-02-03","2012-02-10","2012-02-17","2012-02-24","2012-03-02","2012-03-09","2012-03-16","2012-03-23","2012-03-30","2012-04-05","2012-04-13","2012-04-20","2012-04-27","2012-05-04","2012-05-11","2012-05-18","2012-05-25","2012-06-01","2012-06-08","2012-06-15","2012-06-22","2012-06-29","2012-07-06","2012-07-13","2012-07-20","2012-07-27","2012-08-03","2012-08-10","2012-08-17","2012-08-24","2012-08-31","2012-09-07","2012-09-14","2012-09-21","2012-09-28","2012-10-05","2012-10-12","2012-10-19","2012-10-26","2012-11-02","2012-11-09","2012-11-16","2012-11-23","2012-11-30","2012-12-07","2012-12-14","2012-12-21","2012-12-28","2013-01-04","2013-01-11","2013-01-18","2013-01-25","2013-02-01","2013-02-08","2013-02-15","2013-02-22","2013-03-01","2013-03-08","2013-03-15","2013-03-22","2013-03-28","2013-04-05","2013-04-12","2013-04-19","2013-04-26","2013-05-03","2013-05-10","2013-05-17","2013-05-24","2013-05-31","2013-06-07","2013-06-14","2013-06-21","2013-06-28","2013-07-05","2013-07-12","2013-07-19","2013-07-26","2013-08-02","2013-08-09","2013-08-16","2013-08-23","2013-08-30","2013-09-06","2013-09-13","2013-09-20","2013-09-27","2013-10-04","2013-10-11","2013-10-18","2013-10-25","2013-11-01","2013-11-08","2013-11-15","2013-11-22","2013-11-29","2013-12-06","2013-12-13","2013-12-20","2013-12-27","2014-01-03","2014-01-10","2014-01-17","2014-01-24","2014-01-31","2014-02-07","2014-02-14","2014-02-21","2014-02-28","2014-03-07","2014-03-14","2014-03-21","2014-03-28","2014-04-04","2014-04-11","2014-04-17","2014-04-25","2014-05-02","2014-05-09","2014-05-16","2014-05-23","2014-05-30","2014-06-06","2014-06-13","2014-06-20","2014-06-27","2014-07-03","2014-07-11","2014-07-18","2014-07-25","2014-08-01","2014-08-08","2014-08-15","2014-08-22","2014-08-29","2014-09-05","2014-09-12","2014-09-19","2014-09-26","2014-10-03","2014-10-10","2014-10-17","2014-10-24","2014-10-31","2014-11-07","2014-11-14","2014-11-21","2014-11-28","2014-12-05","2014-12-12","2014-12-19","2014-12-26","2015-01-02","2015-01-09","2015-01-16","2015-01-23","2015-01-30","2015-02-06","2015-02-13","2015-02-20","2015-02-27","2015-03-06","2015-03-13","2015-03-20","2015-03-27","2015-04-02","2015-04-10","2015-04-17","2015-04-24","2015-05-01","2015-05-08","2015-05-15","2015-05-22","2015-05-29","2015-06-05","2015-06-12","2015-06-19","2015-06-26","2015-07-02","2015-07-10","2015-07-17","2015-07-24","2015-07-31","2015-08-07","2015-08-14","2015-08-21","2015-08-28","2015-09-04","2015-09-11","2015-09-18","2015-09-25","2015-10-02","2015-10-09","2015-10-16","2015-10-23","2015-10-30","2015-11-06","2015-11-13","2015-11-20","2015-11-27","2015-12-04","2015-12-11","2015-12-18","2015-12-24","2015-12-31","2016-01-08","2016-01-15","2016-01-22","2016-01-29","2016-02-05","2016-02-12","2016-02-19","2016-02-26","2016-03-04","2016-03-11","2016-03-18","2016-03-24","2016-04-01","2016-04-08","2016-04-15","2016-04-22","2016-04-29","2016-05-06","2016-05-13","2016-05-20","2016-05-27","2016-06-03","2016-06-10","2016-06-17","2016-06-24","2016-07-01","2016-07-08","2016-07-15","2016-07-22","2016-07-29","2016-08-05","2016-08-12","2016-08-19","2016-08-26","2016-09-02","2016-09-09","2016-09-16","2016-09-23","2016-09-30","2016-10-07","2016-10-14","2016-10-21","2016-10-28","2016-11-04","2016-11-11","2016-11-18","2016-11-25","2016-12-02","2016-12-09","2016-12-16","2016-12-23","2016-12-30","2017-01-06","2017-01-13","2017-01-20","2017-01-27","2017-02-03","2017-02-10","2017-02-17","2017-02-24","2017-03-03","2017-03-10","2017-03-17","2017-03-24","2017-03-31","2017-04-07","2017-04-13","2017-04-21","2017-04-28","2017-05-05","2017-05-12","2017-05-19","2017-05-26","2017-06-02","2017-06-09","2017-06-16","2017-06-23","2017-06-30","2017-07-07","2017-07-14","2017-07-21","2017-07-28","2017-08-04","2017-08-11","2017-08-18","2017-08-25","2017-09-01","2017-09-08","2017-09-15","2017-09-22","2017-09-29","2017-10-06","2017-10-13","2017-10-20","2017-10-27","2017-11-03","2017-11-10","2017-11-17","2017-11-24","2017-12-01","2017-12-08","2017-12-15","2017-12-22","2017-12-29","2018-01-05","2018-01-12","2018-01-19","2018-01-26","2018-02-02","2018-02-09","2018-02-16","2018-02-23","2018-03-02","2018-03-09","2018-03-16","2018-03-23","2018-03-29","2018-04-06","2018-04-13","2018-04-20","2018-04-27","2018-05-04","2018-05-11","2018-05-18","2018-05-25","2018-06-01","2018-06-08","2018-06-15","2018-06-22","2018-06-29","2018-07-06","2018-07-13","2018-07-20","2018-07-27","2018-08-03","2018-08-10","2018-08-17","2018-08-24","2018-08-31","2018-09-07","2018-09-14","2018-09-21","2018-09-28","2018-10-05","2018-10-12","2018-10-19","2018-10-26","2018-11-02","2018-11-09","2018-11-16","2018-11-23","2018-11-30","2018-12-07","2018-12-14","2018-12-21","2018-12-28","2019-01-04","2019-01-11","2019-01-18","2019-01-25","2019-02-01","2019-02-08","2019-02-15","2019-02-22","2019-03-01","2019-03-08"];

  let prices  = [127,135.25,138.25,149.19,158.13,157.5,155.13,84.75,82.75,82.37,81.81,87.81,93,89,92.12,92.12,89.62,85.75,89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175,160,157.75,147.75,150.13,154.94,160.19,171.19,178.13,92.69,94.25,86.62,86,81.31,79.06,76.87,77.56,80.69,79.56,78.12,85,84.94,92,93.25,99.44,90.25,85.81,85.12,84.69,83.37,93.25,95.87,95,96.44,90.94,89.98,94.94,88.06,92.69,92.56,91.56,89.19,86,91.12,96.12,93.87,115.25,117.44,116.75,111.44,112.25,103.75,98.25,106.56,99.94,95.06,91.31,96.12,101,99.37,111.69,106.25,89.06,74.12,78.94,69.75,71.12,68.81,65.06,61.44,66.31,68.81,72.56,77.69,80,82,78.94,72.31,69.69,69.12,72.44,71,70.62,70.19,69.31,64.19,63.25,60.31,55.56,53.75,65.19,67.69,68.25,67.37,69.06,69.94,56.63,54.44,49.19,46.44,43.38,49.13,53.5,61,64,60.81,59.13,57.31,56.75,56.69,56.69,54.56,56.56,54.69,56.19,62.18,69,67.12,70.75,69.4,68.09,70.91,70.34,73.19,68.02,68.83,73,66.06,71.34,69.18,65.47,66.89,65.52,61.88,62.05,57.05,55.4,57.58,49.71,51.17,57.72,56.38,57.9,62.2,61.4,65.21,65.75,64.71,64.21,67.83,67.44,67.54,67.87,68.9,68.61,66.1,63.8,62.66,60.65,60.23,57.99,61.37,63.95,62.49,60.45,60.31,55.87,55.93,57.2,51.5,49.56,50.05,56.03,53.26,50.91,51.98,55.25,52.28,54.7,54.85,51.86,49.56,45.35,44.41,48.12,50,52.22,49.08,47.82,47.91,47.46,45.25,43.77,48.87,53.15,52.68,53,55.1,56.69,58.22,57.68,55.47,52.5,53.04,52.97,53.79,55.92,51.46,49.85,47.46,46.58,48.3,24.63,23.7,23.56,24.86,26.57,24.67,25.09,24.2,25.5,25.22,26.1,26.36,25.57,24.22,24.61,23.67,24.65,26.33,25.63,26.5,27.31,26.89,26.89,26.17,25.58,25.54,26.22,26.52,28.38,28.34,29.96,28.19,29.08,28.91,28.93,26.61,26.14,26.1,25.5,25.11,25.71,25.98,26.65,27.36,27.21,27.45,27.66,27.81,28.48,27.65,27.08,26.59,26.57,26.53,26.35,25.38,24.63,25.03,25.85,25.48,25.16,27.54,26.13,25.78,25.86,25.89,26.23,25.95,26.77,28.35,28.57,28.57,27.86,27.48,28.03,28.49,27.14,27.02,27.2,27.46,27.11,27.49,27.51,27.29,28.25,27.99,27.99,27.74,27.97,29.31,29.97,26.86,26.6,27.23,27.08,26.96,27.01,26.72,26.67,26.12,25.65,26.18,26.32,25.97,25.48,25.25,25.17,25.09,24.31,24.28,24.12,24.94,24.46,24.98,25.3,25.22,25.3,25.74,26.07,25.43,25.43,25.04,25.04,24.71,25.09,25.79,25.68,25.61,27.76,27.05,26.72,26.97,27.02,26.58,26.07,25.27,25.73,24.59,24.67,24.78,25.53,26.66,27.28,28.07,27.76,28.01,27.71,26.9,26.64,26.15,26.91,27.19,26.41,27.79,27.54,26.69,26.7,26.63,26.93,27.17,27.5,27.01,27.21,27.25,27.07,27.15,24.15,23.8,23.17,22.56,23.72,22.76,22.03,22.1,22.5,23.3,23.3,22.29,23.87,24.25,24.29,24.43,25.79,25.85,25.84,25.6,26.85,26.66,27.35,27.87,28.37,28.43,28.34,28.73,29.24,29.4,29.76,29.12,29.4,30.19,29.64,29.86,29.64,31.21,31.11,30.6,30.19,28.98,28.74,28.9,27.76,27.28,27.33,28.02,27.87,28.55,28.61,29.02,30.12,30.56,30.89,30.83,30.48,30.59,30.05,30.49,29.49,29.47,29.97,29.82,31.16,29.3901,28.9601,28.71,28.25,28.81,28.73,28.44,29.04,28.6499,29.46,29.84,30.17,30.17,35.03,37.06,33.73,34.09,34.11,33.6,34.53,35.31,36.06,36.12,34.38,33.91,33.01,32.94,30.4498,28.56,28.42,27.68,27.1999,27.87,27.96,29.18,27.91,29.16,28.28,30,29.83,29.24,29.39,29.99,28.05,28.32,27.49,29.07,28.23,27.63,25.98,25.25,25.86,26.16,25.44,28.13,27.81,27.84,27.29,25.65,27.62,25.16,27.4,26.32,21.5,23.93,21.96,22.33,21.5,20.06,19.68,20.22,19.87,19.36,19.12,19.13,20.33,19.52,19.71,17.2,17.1,19.66,19.09,18,16.15,15.28,16.65,17.06,18.13,18.75,19.67,19.2,20.91,20.24,19.42,20.22,19.75,20.89,22.14,23.33,24.07,23.35,23.37,22.39,24.29,23.45,23.52,23.56,23.692,24.41,24.68,24.62,24.86,25.26,25.55,24.96,25.55,26.5,28.02,27.73,28.52,29.63,29.62,29.22,29.98,29.85,30.36,31,30.48,30.66,30.86,28.96,28.18,28.02,27.93,28.77,28.67,28.5875,29.27,29.59,29.66,29.16,30.34,30.67,30.96,30.535,28.21,28.93,26.84,25.8,25.79,25.66,26.44,24.5325,23.27,24.27,24.89,25.81,25.81,25.55,24.4,24.23,23.93,24.29,23.85,25.22,24.775,24.38,24.57,25.54,25.3775,26.665,26.85,26.27,25.69,25.25,27.02,27.34,27.9025,28.3,27.91,28.6,28.3,28.02,27.751,27.77,27.25,27.06,26.55,25.9525,25.68,24.8,25.62,25.48,26.07,25.37,25.52,25.92,25.87,25.03,24.49,24.76,23.905,23.705,24.26,24.3,26.02,26.92,26.78,27.53,27.4,25.68,25.1,24.05,25.25,25.8,25.74,27.12,25.06,24.89,26.25,27.27,27.16,26.98,26.25,26.91,25.3,24.3,25.22,25.7,26,26.03,25.96,28.105,28.25,29.71,29.23,30.24,30.495,31.25,31.48,32.075,31.99,32.6,32.01,32.255,31.52,30.81,32.42,31.98,30.98,31.16,29.27,29.06,28.45,29.65,30.02,30.7,30.59,30.185,29.39,30.115,29.755,29.75,30.42,30.9,30.56,30.82,30.95,31.21,31.19,29.76,29.85,29.2,28.64,28.21,29.4998,28.83,26.5209,27.7,26.615,26.455,26.81,27.45,26.55,26.74,26.83,27.25,27.88,27.93,27.55,28.01,27.76,27.95,28,28.035,28.25,28.605,28.7,28.79,29.765,31.79,33.49,32.69,34.87,34.269,34.9,35.67,34.4,33.265,34.545,34.21,35.67,31.4,31.62,31.89,32.7,31.8,34.75,33.4,31.152,33.03,32.791,33.27,33.88,34.13,34.96,35.73,35.525,37.78,37.841,37.57,38.13,38.36,36.69,36.8,37.29,36.91,36.04,36.38,36.805,37.84,36.56,37.62,37.98,38.31,37.9,37.7,40.16,40.3,39.87,39.209,40.01,39.91,39.69,39.54,39.83,40.12,40.94,41.48,41.23,41.68,42.25,41.8,42.09,44.69,44.5,42.86,43.2,44.79,45.15,45.43,45.91,46.695,47.52,46.41,46.09,44.03,43.63,46.13,46.95,48.68,49.58,47.98,47.81,48.42,46.95,47.66,47.88,46.76,47.19,46.24,47.18,40.4,42.41,43.87,43.855,43.85,42.36,41.38,42.88,40.97,40.29,41.72,41.615,47.87,48.655,47.75,48.295,46.9,46.86,46.14,45.97,46.1,45.26,44.4,44.61,46.62,45.94,46.7,46.74,47,43.07,43.93,42.61,43.48,43.48,43.94,45.57,47.11,47.51,52.87,52.64,54.92,52.84,54.19,53.93,55.91,54.06,54.13,55.67,55.48,52.33,50.99,52.29,55.09,50.16,50.5,51.82,51.3,52.03,53.07,53.49,54.21,55.57,54.42,55.65,51.78,49.87,50.39,51.08,50.62,52.32,51.79,51.48,50.13,49.83,51.16,52.3,53.7,56.57,56.68,57.96,57.94,57.62,58.03,57.67,56.21,57.25,57.43,57.6,57.8,57.42,59.66,59.87,58.71,59.02,60.35,60.53,59.25,61.97,62.3,63.24,62.14,62.84,62.7,62.74,65.78,63.68,64,64.62,64.62,64.25,64.93,64.87,64.98,65.86,65.68,64.95,66.4,68.46,69,68.38,67.69,69.96,71.76,70.32,70,71.21,68.93,69.46,72.78,73.79,73.04,72.68,72.5,72.49,72.82,73.94,73.98,75.31,74.41,74.49,76,77.49,78.81,83.81,84.14,83.87,82.4,83.26,84.26,84.16,86.85,85.51,85.54,88.19,89.6,90,94.06,91.78,88.18,92,94.06,93.05,96.54,94.6,87.18,91.27,90.23,93.08,95,95.82,95.16,97.7,96.36,98.36,100.79,101.63,100.13,100.41,98.61,101.16,105.43,106.27,107.68,108.04,109,107.58,108.4,112.33,108.21,113.37,114.26,114.37,112.13,109.57,108.66,106.96,106.16,109.57,108.29,103.07,110.89,104.82,106.03,98.23,100.39,101.93,102.8,107.71,107.17,102.78,105.67,108.22,110.97,112.53,110.51];

  let graph_plot1 = document.getElementById('div_linegraph_data');
  Plotly.newPlot( graph_plot1, [{ x: timestamps, y: prices, name: "Stocks Prices" }], { margin: { t: 0 } } );


  // SMA
  $("#div_container_getsmafirst").hide();
  $("#div_container_sma").show();
  $("#div_linegraph_sma_title").text("Stock Price and Simple Moving Average (window: 50)" );
  $("#div_container_trainingdata").show();

  $("#div_trainingdata").html(
    '<table class="striped"><thead><tr><th scope="col">#</th><th scope="col">Input (X)</th><th scope="col">Output (Y)</th></tr></thead><tbody><tr><td width="20px">1</td><td>[127,135.25,138.25,149.19,158.13,157.5,155.13,84.75,82.75,82.37,81.81,87.81,93,89,92.12,92.12,89.62,85.75,89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81]</td><td>107.96740000000003</td></tr><tr><td width="20px">2</td><td>[135.25,138.25,149.19,158.13,157.5,155.13,84.75,82.75,82.37,81.81,87.81,93,89,92.12,92.12,89.62,85.75,89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75]</td><td>108.26240000000003</td></tr><tr><td width="20px">3</td><td>[138.25,149.19,158.13,157.5,155.13,84.75,82.75,82.37,81.81,87.81,93,89,92.12,92.12,89.62,85.75,89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69]</td><td>108.33120000000002</td></tr><tr><td width="20px">4</td><td>[149.19,158.13,157.5,155.13,84.75,82.75,82.37,81.81,87.81,93,89,92.12,92.12,89.62,85.75,89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88]</td><td>108.56380000000001</td></tr><tr><td width="20px">5</td><td>[158.13,157.5,155.13,84.75,82.75,82.37,81.81,87.81,93,89,92.12,92.12,89.62,85.75,89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75]</td><td>108.57500000000002</td></tr><tr><td width="20px">6</td><td>[157.5,155.13,84.75,82.75,82.37,81.81,87.81,93,89,92.12,92.12,89.62,85.75,89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25]</td><td>108.53740000000003</td></tr><tr><td width="20px">7</td><td>[155.13,84.75,82.75,82.37,81.81,87.81,93,89,92.12,92.12,89.62,85.75,89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175]</td><td>108.88740000000003</td></tr><tr><td width="20px">8</td><td>[84.75,82.75,82.37,81.81,87.81,93,89,92.12,92.12,89.62,85.75,89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175,160]</td><td>108.98480000000002</td></tr><tr><td width="20px">9</td><td>[82.75,82.37,81.81,87.81,93,89,92.12,92.12,89.62,85.75,89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175,160,157.75]</td><td>110.44480000000003</td></tr><tr><td width="20px">10</td><td>[82.37,81.81,87.81,93,89,92.12,92.12,89.62,85.75,89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175,160,157.75,147.75]</td><td>111.74480000000003</td></tr><tr><td width="20px">11</td><td>[81.81,87.81,93,89,92.12,92.12,89.62,85.75,89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175,160,157.75,147.75,150.13]</td><td>113.10000000000002</td></tr><tr><td width="20px">12</td><td>[87.81,93,89,92.12,92.12,89.62,85.75,89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175,160,157.75,147.75,150.13,154.94]</td><td>114.56260000000002</td></tr><tr><td width="20px">13</td><td>[93,89,92.12,92.12,89.62,85.75,89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175,160,157.75,147.75,150.13,154.94,160.19]</td><td>116.01020000000001</td></tr><tr><td width="20px">14</td><td>[89,92.12,92.12,89.62,85.75,89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175,160,157.75,147.75,150.13,154.94,160.19,171.19]</td><td>117.57400000000001</td></tr><tr><td width="20px">15</td><td>[92.12,92.12,89.62,85.75,89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175,160,157.75,147.75,150.13,154.94,160.19,171.19,178.13]</td><td>119.35660000000001</td></tr><tr><td width="20px">16</td><td>[92.12,89.62,85.75,89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175,160,157.75,147.75,150.13,154.94,160.19,171.19,178.13,92.69]</td><td>119.36800000000002</td></tr><tr><td width="20px">17</td><td>[89.62,85.75,89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175,160,157.75,147.75,150.13,154.94,160.19,171.19,178.13,92.69,94.25]</td><td>119.41060000000003</td></tr><tr><td width="20px">18</td><td>[85.75,89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175,160,157.75,147.75,150.13,154.94,160.19,171.19,178.13,92.69,94.25,86.62]</td><td>119.35060000000003</td></tr><tr><td width="20px">19</td><td>[89.44,85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175,160,157.75,147.75,150.13,154.94,160.19,171.19,178.13,92.69,94.25,86.62,86]</td><td>119.35560000000002</td></tr><tr><td width="20px">20</td><td>[85.56,84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175,160,157.75,147.75,150.13,154.94,160.19,171.19,178.13,92.69,94.25,86.62,86,81.31]</td><td>119.19300000000001</td></tr><tr><td width="20px">21</td><td>[84.81,86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175,160,157.75,147.75,150.13,154.94,160.19,171.19,178.13,92.69,94.25,86.62,86,81.31,79.06]</td><td>119.063</td></tr><tr><td width="20px">22</td><td>[86.25,85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175,160,157.75,147.75,150.13,154.94,160.19,171.19,178.13,92.69,94.25,86.62,86,81.31,79.06,76.87]</td><td>118.90420000000002</td></tr><tr><td width="20px">23</td><td>[85.75,94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175,160,157.75,147.75,150.13,154.94,160.19,171.19,178.13,92.69,94.25,86.62,86,81.31,79.06,76.87,77.56]</td><td>118.7304</td></tr><tr><td width="20px">24</td><td>[94.69,104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175,160,157.75,147.75,150.13,154.94,160.19,171.19,178.13,92.69,94.25,86.62,86,81.31,79.06,76.87,77.56,80.69]</td><td>118.62920000000001</td></tr><tr><td width="20px">25</td><td>[104.44,107.25,113.19,117.94,113.81,109.94,105.87,104.25,110.62,105.25,96.62,104.25,105.37,113.06,104.12,96.87,105.06,106.37,105.87,109.31,110,113.62,128.06,127.37,134,137.81,141.75,138.69,149.88,149.75,156.25,175,160,157.75,147.75,150.13,154.94,160.19,171.19,178.13,92.69,94.25,86.62,86,81.31,79.06,76.87,77.56,80.69,79.56]</td><td>118.32660000000001</td></tr></tbody></table>'
  );

  let timestamps_a = ["1998-01-09","1998-01-16","1998-01-23","1998-01-30","1998-02-06","1998-02-13","1998-02-20","1998-02-27","1998-03-06","1998-03-13","1998-03-20","1998-03-27","1998-04-03","1998-04-09","1998-04-17","1998-04-24","1998-05-01","1998-05-08","1998-05-15","1998-05-22","1998-05-29","1998-06-05","1998-06-12","1998-06-19","1998-06-26","1998-07-02","1998-07-10","1998-07-17","1998-07-24","1998-07-31","1998-08-07","1998-08-14","1998-08-21","1998-08-28","1998-09-04","1998-09-11","1998-09-18","1998-09-25","1998-10-02","1998-10-09","1998-10-16","1998-10-23","1998-10-30","1998-11-06","1998-11-13","1998-11-20","1998-11-27","1998-12-04","1998-12-11","1998-12-18","1998-12-24","1998-12-31","1999-01-08","1999-01-15","1999-01-22","1999-01-29","1999-02-05","1999-02-12","1999-02-19","1999-02-26","1999-03-05","1999-03-12","1999-03-19","1999-03-26","1999-04-01","1999-04-09","1999-04-16","1999-04-23","1999-04-30","1999-05-07","1999-05-14","1999-05-21","1999-05-28","1999-06-04","1999-06-11","1999-06-18","1999-06-25","1999-07-02","1999-07-09","1999-07-16","1999-07-23","1999-07-30","1999-08-06","1999-08-13","1999-08-20","1999-08-27","1999-09-03","1999-09-10","1999-09-17","1999-09-24","1999-10-01","1999-10-08","1999-10-15","1999-10-22","1999-10-29","1999-11-05","1999-11-12","1999-11-19","1999-11-26","1999-12-03","1999-12-10","1999-12-17","1999-12-23","1999-12-31","2000-01-07","2000-01-14","2000-01-21","2000-01-28","2000-02-04","2000-02-11","2000-02-18","2000-02-25","2000-03-03","2000-03-10","2000-03-17","2000-03-24","2000-03-31","2000-04-07","2000-04-14","2000-04-20","2000-04-28","2000-05-05","2000-05-12","2000-05-19","2000-05-26","2000-06-02","2000-06-09","2000-06-16","2000-06-23","2000-06-30","2000-07-07","2000-07-14","2000-07-21","2000-07-28","2000-08-04","2000-08-11","2000-08-18","2000-08-25","2000-09-01","2000-09-08","2000-09-15","2000-09-22","2000-09-29","2000-10-06","2000-10-13","2000-10-20","2000-10-27","2000-11-03","2000-11-10","2000-11-17","2000-11-24","2000-12-01","2000-12-08","2000-12-15","2000-12-22","2000-12-29","2001-01-05","2001-01-12","2001-01-19","2001-01-26","2001-02-02","2001-02-09","2001-02-16","2001-02-23","2001-03-02","2001-03-09","2001-03-16","2001-03-23","2001-03-30","2001-04-06","2001-04-12","2001-04-20","2001-04-27","2001-05-04","2001-05-11","2001-05-18","2001-05-25","2001-06-01","2001-06-08","2001-06-15","2001-06-22","2001-06-29","2001-07-06","2001-07-13","2001-07-20","2001-07-27","2001-08-03","2001-08-10","2001-08-17","2001-08-24","2001-08-31","2001-09-07","2001-09-10","2001-09-21","2001-09-28","2001-10-05","2001-10-12","2001-10-19","2001-10-26","2001-11-02","2001-11-09","2001-11-16","2001-11-23","2001-11-30","2001-12-07","2001-12-14","2001-12-21","2001-12-28","2002-01-04","2002-01-11","2002-01-18","2002-01-25","2002-02-01","2002-02-08","2002-02-15","2002-02-22","2002-03-01","2002-03-08","2002-03-15","2002-03-22","2002-03-28","2002-04-05","2002-04-12","2002-04-19","2002-04-26","2002-05-03","2002-05-10","2002-05-17","2002-05-24","2002-05-31","2002-06-07","2002-06-14","2002-06-21","2002-06-28","2002-07-05","2002-07-12","2002-07-19","2002-07-26","2002-08-02","2002-08-09","2002-08-16","2002-08-23","2002-08-30","2002-09-06","2002-09-13","2002-09-20","2002-09-27","2002-10-04","2002-10-11","2002-10-18","2002-10-25","2002-11-01","2002-11-08","2002-11-15","2002-11-22","2002-11-29","2002-12-06","2002-12-13","2002-12-20","2002-12-27","2003-01-03","2003-01-10","2003-01-17","2003-01-24","2003-01-31","2003-02-07","2003-02-14","2003-02-21","2003-02-28","2003-03-07","2003-03-14","2003-03-21","2003-03-28","2003-04-04","2003-04-11","2003-04-17","2003-04-25","2003-05-02","2003-05-09","2003-05-16","2003-05-23","2003-05-30","2003-06-06","2003-06-13","2003-06-20","2003-06-27","2003-07-03","2003-07-11","2003-07-18","2003-07-25","2003-08-01","2003-08-08","2003-08-15","2003-08-22","2003-08-29","2003-09-05","2003-09-12","2003-09-19","2003-09-26","2003-10-03","2003-10-10","2003-10-17","2003-10-24","2003-10-31","2003-11-07","2003-11-14","2003-11-21","2003-11-28","2003-12-05","2003-12-12","2003-12-19","2003-12-26","2004-01-02","2004-01-09","2004-01-16","2004-01-23","2004-01-30","2004-02-06","2004-02-13","2004-02-20","2004-02-27","2004-03-05","2004-03-12","2004-03-19","2004-03-26","2004-04-02","2004-04-08","2004-04-16","2004-04-23","2004-04-30","2004-05-07","2004-05-14","2004-05-21","2004-05-28","2004-06-04","2004-06-10","2004-06-18","2004-06-25","2004-07-02","2004-07-09","2004-07-16","2004-07-23","2004-07-30","2004-08-06","2004-08-13","2004-08-20","2004-08-27","2004-09-03","2004-09-10","2004-09-17","2004-09-24","2004-10-01","2004-10-08","2004-10-15","2004-10-22","2004-10-29","2004-11-05","2004-11-12","2004-11-19","2004-11-26","2004-12-03","2004-12-10","2004-12-17","2004-12-23","2004-12-31","2005-01-07","2005-01-14","2005-01-21","2005-01-28","2005-02-04","2005-02-11","2005-02-18","2005-02-25","2005-03-04","2005-03-11","2005-03-18","2005-03-24","2005-04-01","2005-04-08","2005-04-15","2005-04-22","2005-04-29","2005-05-06","2005-05-13","2005-05-20","2005-05-27","2005-06-03","2005-06-10","2005-06-17","2005-06-24","2005-07-01","2005-07-08","2005-07-15","2005-07-22","2005-07-29","2005-08-05","2005-08-12","2005-08-19","2005-08-26","2005-09-02","2005-09-09","2005-09-16","2005-09-23","2005-09-30","2005-10-07","2005-10-14","2005-10-21","2005-10-28","2005-11-04","2005-11-11","2005-11-18","2005-11-25","2005-12-02","2005-12-09","2005-12-16","2005-12-23","2005-12-30","2006-01-06","2006-01-13","2006-01-20","2006-01-27","2006-02-03","2006-02-10","2006-02-17","2006-02-24","2006-03-03","2006-03-10","2006-03-17","2006-03-24","2006-03-31","2006-04-07","2006-04-13","2006-04-21","2006-04-28","2006-05-05","2006-05-12","2006-05-19","2006-05-26","2006-06-02","2006-06-09","2006-06-16","2006-06-23","2006-06-30","2006-07-07","2006-07-14","2006-07-21","2006-07-28","2006-08-04","2006-08-11","2006-08-18","2006-08-25","2006-09-01","2006-09-08","2006-09-15","2006-09-22","2006-09-29","2006-10-06","2006-10-13","2006-10-20","2006-10-27","2006-11-03","2006-11-10","2006-11-17","2006-11-24","2006-12-01","2006-12-08","2006-12-15","2006-12-22","2006-12-29","2007-01-05","2007-01-12","2007-01-19","2007-01-26","2007-02-02","2007-02-09","2007-02-16","2007-02-23","2007-03-02","2007-03-09","2007-03-16","2007-03-23","2007-03-30","2007-04-05","2007-04-13","2007-04-20","2007-04-27","2007-05-04","2007-05-11","2007-05-18","2007-05-25","2007-06-01","2007-06-08","2007-06-15","2007-06-22","2007-06-29","2007-07-06","2007-07-13","2007-07-20","2007-07-27","2007-08-03","2007-08-10","2007-08-17","2007-08-24","2007-08-31","2007-09-07","2007-09-14","2007-09-21","2007-09-28","2007-10-05","2007-10-12","2007-10-19","2007-10-26","2007-11-02","2007-11-09","2007-11-16","2007-11-23","2007-11-30","2007-12-07","2007-12-14","2007-12-21","2007-12-28","2008-01-04","2008-01-11","2008-01-18","2008-01-25","2008-02-01","2008-02-08","2008-02-15","2008-02-22","2008-02-29","2008-03-07","2008-03-14","2008-03-20","2008-03-28","2008-04-04","2008-04-11","2008-04-18","2008-04-25","2008-05-02","2008-05-09","2008-05-16","2008-05-23","2008-05-30","2008-06-06","2008-06-13","2008-06-20","2008-06-27","2008-07-03","2008-07-11","2008-07-18","2008-07-25","2008-08-01","2008-08-08","2008-08-15","2008-08-22","2008-08-29","2008-09-05","2008-09-12","2008-09-19","2008-09-26","2008-10-03","2008-10-10","2008-10-17","2008-10-24","2008-10-31","2008-11-07","2008-11-14","2008-11-21","2008-11-28","2008-12-05","2008-12-12","2008-12-19","2008-12-26","2009-01-02","2009-01-09","2009-01-16","2009-01-23","2009-01-30","2009-02-06","2009-02-13","2009-02-20","2009-02-27","2009-03-06","2009-03-13","2009-03-20","2009-03-27","2009-04-03","2009-04-09","2009-04-17","2009-04-24","2009-05-01","2009-05-08","2009-05-15","2009-05-22","2009-05-29","2009-06-05","2009-06-12","2009-06-19","2009-06-26","2009-07-02","2009-07-10","2009-07-17","2009-07-24","2009-07-31","2009-08-07","2009-08-14","2009-08-21","2009-08-28","2009-09-04","2009-09-11","2009-09-18","2009-09-25","2009-10-02","2009-10-09","2009-10-16","2009-10-23","2009-10-30","2009-11-06","2009-11-13","2009-11-20","2009-11-27","2009-12-04","2009-12-11","2009-12-18","2009-12-24","2009-12-31","2010-01-08","2010-01-15","2010-01-22","2010-01-29","2010-02-05","2010-02-12","2010-02-19","2010-02-26","2010-03-05","2010-03-12","2010-03-19","2010-03-26","2010-04-01","2010-04-09","2010-04-16","2010-04-23","2010-04-30","2010-05-07","2010-05-14","2010-05-21","2010-05-28","2010-06-04","2010-06-11","2010-06-18","2010-06-25","2010-07-02","2010-07-09","2010-07-16","2010-07-23","2010-07-30","2010-08-06","2010-08-13","2010-08-20","2010-08-27","2010-09-03","2010-09-10","2010-09-17","2010-09-24","2010-10-01","2010-10-08","2010-10-15","2010-10-22","2010-10-29","2010-11-05","2010-11-12","2010-11-19","2010-11-26","2010-12-03","2010-12-10","2010-12-17","2010-12-23","2010-12-31","2011-01-07","2011-01-14","2011-01-21","2011-01-28","2011-02-04","2011-02-11","2011-02-18","2011-02-25","2011-03-04","2011-03-11","2011-03-18","2011-03-25","2011-04-01","2011-04-08","2011-04-15","2011-04-21","2011-04-29","2011-05-06","2011-05-13","2011-05-20","2011-05-27","2011-06-03","2011-06-10","2011-06-17","2011-06-24","2011-07-01","2011-07-08","2011-07-15","2011-07-22","2011-07-29","2011-08-05","2011-08-12","2011-08-19","2011-08-26","2011-09-02","2011-09-09","2011-09-16","2011-09-23","2011-09-30","2011-10-07","2011-10-14","2011-10-21","2011-10-28","2011-11-04","2011-11-11","2011-11-18","2011-11-25","2011-12-02","2011-12-09","2011-12-16","2011-12-23","2011-12-30","2012-01-06","2012-01-13","2012-01-20","2012-01-27","2012-02-03","2012-02-10","2012-02-17","2012-02-24","2012-03-02","2012-03-09","2012-03-16","2012-03-23","2012-03-30","2012-04-05","2012-04-13","2012-04-20","2012-04-27","2012-05-04","2012-05-11","2012-05-18","2012-05-25","2012-06-01","2012-06-08","2012-06-15","2012-06-22","2012-06-29","2012-07-06","2012-07-13","2012-07-20","2012-07-27","2012-08-03","2012-08-10","2012-08-17","2012-08-24","2012-08-31","2012-09-07","2012-09-14","2012-09-21","2012-09-28","2012-10-05","2012-10-12","2012-10-19","2012-10-26","2012-11-02","2012-11-09","2012-11-16","2012-11-23","2012-11-30","2012-12-07","2012-12-14","2012-12-21","2012-12-28","2013-01-04","2013-01-11","2013-01-18","2013-01-25","2013-02-01","2013-02-08","2013-02-15","2013-02-22","2013-03-01","2013-03-08","2013-03-15","2013-03-22","2013-03-28","2013-04-05","2013-04-12","2013-04-19","2013-04-26","2013-05-03","2013-05-10","2013-05-17","2013-05-24","2013-05-31","2013-06-07","2013-06-14","2013-06-21","2013-06-28","2013-07-05","2013-07-12","2013-07-19","2013-07-26","2013-08-02","2013-08-09","2013-08-16","2013-08-23","2013-08-30","2013-09-06","2013-09-13","2013-09-20","2013-09-27","2013-10-04","2013-10-11","2013-10-18","2013-10-25","2013-11-01","2013-11-08","2013-11-15","2013-11-22","2013-11-29","2013-12-06","2013-12-13","2013-12-20","2013-12-27","2014-01-03","2014-01-10","2014-01-17","2014-01-24","2014-01-31","2014-02-07","2014-02-14","2014-02-21","2014-02-28","2014-03-07","2014-03-14","2014-03-21","2014-03-28","2014-04-04","2014-04-11","2014-04-17","2014-04-25","2014-05-02","2014-05-09","2014-05-16","2014-05-23","2014-05-30","2014-06-06","2014-06-13","2014-06-20","2014-06-27","2014-07-03","2014-07-11","2014-07-18","2014-07-25","2014-08-01","2014-08-08","2014-08-15","2014-08-22","2014-08-29","2014-09-05","2014-09-12","2014-09-19","2014-09-26","2014-10-03","2014-10-10","2014-10-17","2014-10-24","2014-10-31","2014-11-07","2014-11-14","2014-11-21","2014-11-28","2014-12-05","2014-12-12","2014-12-19","2014-12-26","2015-01-02","2015-01-09","2015-01-16","2015-01-23","2015-01-30","2015-02-06","2015-02-13","2015-02-20","2015-02-27","2015-03-06","2015-03-13","2015-03-20","2015-03-27","2015-04-02","2015-04-10","2015-04-17","2015-04-24","2015-05-01","2015-05-08","2015-05-15","2015-05-22","2015-05-29","2015-06-05","2015-06-12","2015-06-19","2015-06-26","2015-07-02","2015-07-10","2015-07-17","2015-07-24","2015-07-31","2015-08-07","2015-08-14","2015-08-21","2015-08-28","2015-09-04","2015-09-11","2015-09-18","2015-09-25","2015-10-02","2015-10-09","2015-10-16","2015-10-23","2015-10-30","2015-11-06","2015-11-13","2015-11-20","2015-11-27","2015-12-04","2015-12-11","2015-12-18","2015-12-24","2015-12-31","2016-01-08","2016-01-15","2016-01-22","2016-01-29","2016-02-05","2016-02-12","2016-02-19","2016-02-26","2016-03-04","2016-03-11","2016-03-18","2016-03-24","2016-04-01","2016-04-08","2016-04-15","2016-04-22","2016-04-29","2016-05-06","2016-05-13","2016-05-20","2016-05-27","2016-06-03","2016-06-10","2016-06-17","2016-06-24","2016-07-01","2016-07-08","2016-07-15","2016-07-22","2016-07-29","2016-08-05","2016-08-12","2016-08-19","2016-08-26","2016-09-02","2016-09-09","2016-09-16","2016-09-23","2016-09-30","2016-10-07","2016-10-14","2016-10-21","2016-10-28","2016-11-04","2016-11-11","2016-11-18","2016-11-25","2016-12-02","2016-12-09","2016-12-16","2016-12-23","2016-12-30","2017-01-06","2017-01-13","2017-01-20","2017-01-27","2017-02-03","2017-02-10","2017-02-17","2017-02-24","2017-03-03","2017-03-10","2017-03-17","2017-03-24","2017-03-31","2017-04-07","2017-04-13","2017-04-21","2017-04-28","2017-05-05","2017-05-12","2017-05-19","2017-05-26","2017-06-02","2017-06-09","2017-06-16","2017-06-23","2017-06-30","2017-07-07","2017-07-14","2017-07-21","2017-07-28","2017-08-04","2017-08-11","2017-08-18","2017-08-25","2017-09-01","2017-09-08","2017-09-15","2017-09-22","2017-09-29","2017-10-06","2017-10-13","2017-10-20","2017-10-27","2017-11-03","2017-11-10","2017-11-17","2017-11-24","2017-12-01","2017-12-08","2017-12-15","2017-12-22","2017-12-29","2018-01-05","2018-01-12","2018-01-19","2018-01-26","2018-02-02","2018-02-09","2018-02-16","2018-02-23","2018-03-02","2018-03-09","2018-03-16","2018-03-23","2018-03-29","2018-04-06","2018-04-13","2018-04-20","2018-04-27","2018-05-04","2018-05-11","2018-05-18","2018-05-25","2018-06-01","2018-06-08","2018-06-15","2018-06-22","2018-06-29","2018-07-06","2018-07-13","2018-07-20","2018-07-27","2018-08-03","2018-08-10","2018-08-17","2018-08-24","2018-08-31","2018-09-07","2018-09-14","2018-09-21","2018-09-28","2018-10-05","2018-10-12","2018-10-19","2018-10-26","2018-11-02","2018-11-09","2018-11-16","2018-11-23","2018-11-30","2018-12-07","2018-12-14","2018-12-21","2018-12-28","2019-01-04","2019-01-11","2019-01-18","2019-01-25","2019-02-01","2019-02-08","2019-02-15","2019-02-22","2019-03-01","2019-03-08"];

  let timestamps_b = ["1998-12-24","1998-12-31","1999-01-08","1999-01-15","1999-01-22","1999-01-29","1999-02-05","1999-02-12","1999-02-19","1999-02-26","1999-03-05","1999-03-12","1999-03-19","1999-03-26","1999-04-01","1999-04-09","1999-04-16","1999-04-23","1999-04-30","1999-05-07","1999-05-14","1999-05-21","1999-05-28","1999-06-04","1999-06-11","1999-06-18","1999-06-25","1999-07-02","1999-07-09","1999-07-16","1999-07-23","1999-07-30","1999-08-06","1999-08-13","1999-08-20","1999-08-27","1999-09-03","1999-09-10","1999-09-17","1999-09-24","1999-10-01","1999-10-08","1999-10-15","1999-10-22","1999-10-29","1999-11-05","1999-11-12","1999-11-19","1999-11-26","1999-12-03","1999-12-10","1999-12-17","1999-12-23","1999-12-31","2000-01-07","2000-01-14","2000-01-21","2000-01-28","2000-02-04","2000-02-11","2000-02-18","2000-02-25","2000-03-03","2000-03-10","2000-03-17","2000-03-24","2000-03-31","2000-04-07","2000-04-14","2000-04-20","2000-04-28","2000-05-05","2000-05-12","2000-05-19","2000-05-26","2000-06-02","2000-06-09","2000-06-16","2000-06-23","2000-06-30","2000-07-07","2000-07-14","2000-07-21","2000-07-28","2000-08-04","2000-08-11","2000-08-18","2000-08-25","2000-09-01","2000-09-08","2000-09-15","2000-09-22","2000-09-29","2000-10-06","2000-10-13","2000-10-20","2000-10-27","2000-11-03","2000-11-10","2000-11-17","2000-11-24","2000-12-01","2000-12-08","2000-12-15","2000-12-22","2000-12-29","2001-01-05","2001-01-12","2001-01-19","2001-01-26","2001-02-02","2001-02-09","2001-02-16","2001-02-23","2001-03-02","2001-03-09","2001-03-16","2001-03-23","2001-03-30","2001-04-06","2001-04-12","2001-04-20","2001-04-27","2001-05-04","2001-05-11","2001-05-18","2001-05-25","2001-06-01","2001-06-08","2001-06-15","2001-06-22","2001-06-29","2001-07-06","2001-07-13","2001-07-20","2001-07-27","2001-08-03","2001-08-10","2001-08-17","2001-08-24","2001-08-31","2001-09-07","2001-09-10","2001-09-21","2001-09-28","2001-10-05","2001-10-12","2001-10-19","2001-10-26","2001-11-02","2001-11-09","2001-11-16","2001-11-23","2001-11-30","2001-12-07","2001-12-14","2001-12-21","2001-12-28","2002-01-04","2002-01-11","2002-01-18","2002-01-25","2002-02-01","2002-02-08","2002-02-15","2002-02-22","2002-03-01","2002-03-08","2002-03-15","2002-03-22","2002-03-28","2002-04-05","2002-04-12","2002-04-19","2002-04-26","2002-05-03","2002-05-10","2002-05-17","2002-05-24","2002-05-31","2002-06-07","2002-06-14","2002-06-21","2002-06-28","2002-07-05","2002-07-12","2002-07-19","2002-07-26","2002-08-02","2002-08-09","2002-08-16","2002-08-23","2002-08-30","2002-09-06","2002-09-13","2002-09-20","2002-09-27","2002-10-04","2002-10-11","2002-10-18","2002-10-25","2002-11-01","2002-11-08","2002-11-15","2002-11-22","2002-11-29","2002-12-06","2002-12-13","2002-12-20","2002-12-27","2003-01-03","2003-01-10","2003-01-17","2003-01-24","2003-01-31","2003-02-07","2003-02-14","2003-02-21","2003-02-28","2003-03-07","2003-03-14","2003-03-21","2003-03-28","2003-04-04","2003-04-11","2003-04-17","2003-04-25","2003-05-02","2003-05-09","2003-05-16","2003-05-23","2003-05-30","2003-06-06","2003-06-13","2003-06-20","2003-06-27","2003-07-03","2003-07-11","2003-07-18","2003-07-25","2003-08-01","2003-08-08","2003-08-15","2003-08-22","2003-08-29","2003-09-05","2003-09-12","2003-09-19","2003-09-26","2003-10-03","2003-10-10","2003-10-17","2003-10-24","2003-10-31","2003-11-07","2003-11-14","2003-11-21","2003-11-28","2003-12-05","2003-12-12","2003-12-19","2003-12-26","2004-01-02","2004-01-09","2004-01-16","2004-01-23","2004-01-30","2004-02-06","2004-02-13","2004-02-20","2004-02-27","2004-03-05","2004-03-12","2004-03-19","2004-03-26","2004-04-02","2004-04-08","2004-04-16","2004-04-23","2004-04-30","2004-05-07","2004-05-14","2004-05-21","2004-05-28","2004-06-04","2004-06-10","2004-06-18","2004-06-25","2004-07-02","2004-07-09","2004-07-16","2004-07-23","2004-07-30","2004-08-06","2004-08-13","2004-08-20","2004-08-27","2004-09-03","2004-09-10","2004-09-17","2004-09-24","2004-10-01","2004-10-08","2004-10-15","2004-10-22","2004-10-29","2004-11-05","2004-11-12","2004-11-19","2004-11-26","2004-12-03","2004-12-10","2004-12-17","2004-12-23","2004-12-31","2005-01-07","2005-01-14","2005-01-21","2005-01-28","2005-02-04","2005-02-11","2005-02-18","2005-02-25","2005-03-04","2005-03-11","2005-03-18","2005-03-24","2005-04-01","2005-04-08","2005-04-15","2005-04-22","2005-04-29","2005-05-06","2005-05-13","2005-05-20","2005-05-27","2005-06-03","2005-06-10","2005-06-17","2005-06-24","2005-07-01","2005-07-08","2005-07-15","2005-07-22","2005-07-29","2005-08-05","2005-08-12","2005-08-19","2005-08-26","2005-09-02","2005-09-09","2005-09-16","2005-09-23","2005-09-30","2005-10-07","2005-10-14","2005-10-21","2005-10-28","2005-11-04","2005-11-11","2005-11-18","2005-11-25","2005-12-02","2005-12-09","2005-12-16","2005-12-23","2005-12-30","2006-01-06","2006-01-13","2006-01-20","2006-01-27","2006-02-03","2006-02-10","2006-02-17","2006-02-24","2006-03-03","2006-03-10","2006-03-17","2006-03-24","2006-03-31","2006-04-07","2006-04-13","2006-04-21","2006-04-28","2006-05-05","2006-05-12","2006-05-19","2006-05-26","2006-06-02","2006-06-09","2006-06-16","2006-06-23","2006-06-30","2006-07-07","2006-07-14","2006-07-21","2006-07-28","2006-08-04","2006-08-11","2006-08-18","2006-08-25","2006-09-01","2006-09-08","2006-09-15","2006-09-22","2006-09-29","2006-10-06","2006-10-13","2006-10-20","2006-10-27","2006-11-03","2006-11-10","2006-11-17","2006-11-24","2006-12-01","2006-12-08","2006-12-15","2006-12-22","2006-12-29","2007-01-05","2007-01-12","2007-01-19","2007-01-26","2007-02-02","2007-02-09","2007-02-16","2007-02-23","2007-03-02","2007-03-09","2007-03-16","2007-03-23","2007-03-30","2007-04-05","2007-04-13","2007-04-20","2007-04-27","2007-05-04","2007-05-11","2007-05-18","2007-05-25","2007-06-01","2007-06-08","2007-06-15","2007-06-22","2007-06-29","2007-07-06","2007-07-13","2007-07-20","2007-07-27","2007-08-03","2007-08-10","2007-08-17","2007-08-24","2007-08-31","2007-09-07","2007-09-14","2007-09-21","2007-09-28","2007-10-05","2007-10-12","2007-10-19","2007-10-26","2007-11-02","2007-11-09","2007-11-16","2007-11-23","2007-11-30","2007-12-07","2007-12-14","2007-12-21","2007-12-28","2008-01-04","2008-01-11","2008-01-18","2008-01-25","2008-02-01","2008-02-08","2008-02-15","2008-02-22","2008-02-29","2008-03-07","2008-03-14","2008-03-20","2008-03-28","2008-04-04","2008-04-11","2008-04-18","2008-04-25","2008-05-02","2008-05-09","2008-05-16","2008-05-23","2008-05-30","2008-06-06","2008-06-13","2008-06-20","2008-06-27","2008-07-03","2008-07-11","2008-07-18","2008-07-25","2008-08-01","2008-08-08","2008-08-15","2008-08-22","2008-08-29","2008-09-05","2008-09-12","2008-09-19","2008-09-26","2008-10-03","2008-10-10","2008-10-17","2008-10-24","2008-10-31","2008-11-07","2008-11-14","2008-11-21","2008-11-28","2008-12-05","2008-12-12","2008-12-19","2008-12-26","2009-01-02","2009-01-09","2009-01-16","2009-01-23","2009-01-30","2009-02-06","2009-02-13","2009-02-20","2009-02-27","2009-03-06","2009-03-13","2009-03-20","2009-03-27","2009-04-03","2009-04-09","2009-04-17","2009-04-24","2009-05-01","2009-05-08","2009-05-15","2009-05-22","2009-05-29","2009-06-05","2009-06-12","2009-06-19","2009-06-26","2009-07-02","2009-07-10","2009-07-17","2009-07-24","2009-07-31","2009-08-07","2009-08-14","2009-08-21","2009-08-28","2009-09-04","2009-09-11","2009-09-18","2009-09-25","2009-10-02","2009-10-09","2009-10-16","2009-10-23","2009-10-30","2009-11-06","2009-11-13","2009-11-20","2009-11-27","2009-12-04","2009-12-11","2009-12-18","2009-12-24","2009-12-31","2010-01-08","2010-01-15","2010-01-22","2010-01-29","2010-02-05","2010-02-12","2010-02-19","2010-02-26","2010-03-05","2010-03-12","2010-03-19","2010-03-26","2010-04-01","2010-04-09","2010-04-16","2010-04-23","2010-04-30","2010-05-07","2010-05-14","2010-05-21","2010-05-28","2010-06-04","2010-06-11","2010-06-18","2010-06-25","2010-07-02","2010-07-09","2010-07-16","2010-07-23","2010-07-30","2010-08-06","2010-08-13","2010-08-20","2010-08-27","2010-09-03","2010-09-10","2010-09-17","2010-09-24","2010-10-01","2010-10-08","2010-10-15","2010-10-22","2010-10-29","2010-11-05","2010-11-12","2010-11-19","2010-11-26","2010-12-03","2010-12-10","2010-12-17","2010-12-23","2010-12-31","2011-01-07","2011-01-14","2011-01-21","2011-01-28","2011-02-04","2011-02-11","2011-02-18","2011-02-25","2011-03-04","2011-03-11","2011-03-18","2011-03-25","2011-04-01","2011-04-08","2011-04-15","2011-04-21","2011-04-29","2011-05-06","2011-05-13","2011-05-20","2011-05-27","2011-06-03","2011-06-10","2011-06-17","2011-06-24","2011-07-01","2011-07-08","2011-07-15","2011-07-22","2011-07-29","2011-08-05","2011-08-12","2011-08-19","2011-08-26","2011-09-02","2011-09-09","2011-09-16","2011-09-23","2011-09-30","2011-10-07","2011-10-14","2011-10-21","2011-10-28","2011-11-04","2011-11-11","2011-11-18","2011-11-25","2011-12-02","2011-12-09","2011-12-16","2011-12-23","2011-12-30","2012-01-06","2012-01-13","2012-01-20","2012-01-27","2012-02-03","2012-02-10","2012-02-17","2012-02-24","2012-03-02","2012-03-09","2012-03-16","2012-03-23","2012-03-30","2012-04-05","2012-04-13","2012-04-20","2012-04-27","2012-05-04","2012-05-11","2012-05-18","2012-05-25","2012-06-01","2012-06-08","2012-06-15","2012-06-22","2012-06-29","2012-07-06","2012-07-13","2012-07-20","2012-07-27","2012-08-03","2012-08-10","2012-08-17","2012-08-24","2012-08-31","2012-09-07","2012-09-14","2012-09-21","2012-09-28","2012-10-05","2012-10-12","2012-10-19","2012-10-26","2012-11-02","2012-11-09","2012-11-16","2012-11-23","2012-11-30","2012-12-07","2012-12-14","2012-12-21","2012-12-28","2013-01-04","2013-01-11","2013-01-18","2013-01-25","2013-02-01","2013-02-08","2013-02-15","2013-02-22","2013-03-01","2013-03-08","2013-03-15","2013-03-22","2013-03-28","2013-04-05","2013-04-12","2013-04-19","2013-04-26","2013-05-03","2013-05-10","2013-05-17","2013-05-24","2013-05-31","2013-06-07","2013-06-14","2013-06-21","2013-06-28","2013-07-05","2013-07-12","2013-07-19","2013-07-26","2013-08-02","2013-08-09","2013-08-16","2013-08-23","2013-08-30","2013-09-06","2013-09-13","2013-09-20","2013-09-27","2013-10-04","2013-10-11","2013-10-18","2013-10-25","2013-11-01","2013-11-08","2013-11-15","2013-11-22","2013-11-29","2013-12-06","2013-12-13","2013-12-20","2013-12-27","2014-01-03","2014-01-10","2014-01-17","2014-01-24","2014-01-31","2014-02-07","2014-02-14","2014-02-21","2014-02-28","2014-03-07","2014-03-14","2014-03-21","2014-03-28","2014-04-04","2014-04-11","2014-04-17","2014-04-25","2014-05-02","2014-05-09","2014-05-16","2014-05-23","2014-05-30","2014-06-06","2014-06-13","2014-06-20","2014-06-27","2014-07-03","2014-07-11","2014-07-18","2014-07-25","2014-08-01","2014-08-08","2014-08-15","2014-08-22","2014-08-29","2014-09-05","2014-09-12","2014-09-19","2014-09-26","2014-10-03","2014-10-10","2014-10-17","2014-10-24","2014-10-31","2014-11-07","2014-11-14","2014-11-21","2014-11-28","2014-12-05","2014-12-12","2014-12-19","2014-12-26","2015-01-02","2015-01-09","2015-01-16","2015-01-23","2015-01-30","2015-02-06","2015-02-13","2015-02-20","2015-02-27","2015-03-06","2015-03-13","2015-03-20","2015-03-27","2015-04-02","2015-04-10","2015-04-17","2015-04-24","2015-05-01","2015-05-08","2015-05-15","2015-05-22","2015-05-29","2015-06-05","2015-06-12","2015-06-19","2015-06-26","2015-07-02","2015-07-10","2015-07-17","2015-07-24","2015-07-31","2015-08-07","2015-08-14","2015-08-21","2015-08-28","2015-09-04","2015-09-11","2015-09-18","2015-09-25","2015-10-02","2015-10-09","2015-10-16","2015-10-23","2015-10-30","2015-11-06","2015-11-13","2015-11-20","2015-11-27","2015-12-04","2015-12-11","2015-12-18","2015-12-24","2015-12-31","2016-01-08","2016-01-15","2016-01-22","2016-01-29","2016-02-05","2016-02-12","2016-02-19","2016-02-26","2016-03-04","2016-03-11","2016-03-18","2016-03-24","2016-04-01","2016-04-08","2016-04-15","2016-04-22","2016-04-29","2016-05-06","2016-05-13","2016-05-20","2016-05-27","2016-06-03","2016-06-10","2016-06-17","2016-06-24","2016-07-01","2016-07-08","2016-07-15","2016-07-22","2016-07-29","2016-08-05","2016-08-12","2016-08-19","2016-08-26","2016-09-02","2016-09-09","2016-09-16","2016-09-23","2016-09-30","2016-10-07","2016-10-14","2016-10-21","2016-10-28","2016-11-04","2016-11-11","2016-11-18","2016-11-25","2016-12-02","2016-12-09","2016-12-16","2016-12-23","2016-12-30","2017-01-06","2017-01-13","2017-01-20","2017-01-27","2017-02-03","2017-02-10","2017-02-17","2017-02-24","2017-03-03","2017-03-10","2017-03-17","2017-03-24","2017-03-31","2017-04-07","2017-04-13","2017-04-21","2017-04-28","2017-05-05","2017-05-12","2017-05-19","2017-05-26","2017-06-02","2017-06-09","2017-06-16","2017-06-23","2017-06-30","2017-07-07","2017-07-14","2017-07-21","2017-07-28","2017-08-04","2017-08-11","2017-08-18","2017-08-25","2017-09-01","2017-09-08","2017-09-15","2017-09-22","2017-09-29","2017-10-06","2017-10-13","2017-10-20","2017-10-27","2017-11-03","2017-11-10","2017-11-17","2017-11-24","2017-12-01","2017-12-08","2017-12-15","2017-12-22","2017-12-29","2018-01-05","2018-01-12","2018-01-19","2018-01-26","2018-02-02","2018-02-09","2018-02-16","2018-02-23","2018-03-02","2018-03-09","2018-03-16","2018-03-23","2018-03-29","2018-04-06","2018-04-13","2018-04-20","2018-04-27","2018-05-04","2018-05-11","2018-05-18","2018-05-25","2018-06-01","2018-06-08","2018-06-15","2018-06-22","2018-06-29","2018-07-06","2018-07-13","2018-07-20","2018-07-27","2018-08-03","2018-08-10","2018-08-17","2018-08-24","2018-08-31","2018-09-07","2018-09-14","2018-09-21","2018-09-28","2018-10-05","2018-10-12","2018-10-19","2018-10-26","2018-11-02","2018-11-09","2018-11-16","2018-11-23","2018-11-30","2018-12-07","2018-12-14","2018-12-21","2018-12-28","2019-01-04","2019-01-11","2019-01-18","2019-01-25","2019-02-01","2019-02-08","2019-02-15","2019-02-22","2019-03-01","2019-03-08"];

  let sma = [107.96740000000003,108.26240000000003,108.33120000000002,108.56380000000001,108.57500000000002,108.53740000000003,108.88740000000003,108.98480000000002,110.44480000000003,111.74480000000003,113.10000000000002,114.56260000000002,116.01020000000001,117.57400000000001,119.35660000000001,119.36800000000002,119.41060000000003,119.35060000000003,119.35560000000002,119.19300000000001,119.063,118.90420000000002,118.7304,118.62920000000001,118.32660000000001,117.80020000000002,117.35520000000001,116.79020000000001,116.27140000000001,115.8602,115.6502,115.33780000000002,114.96900000000001,114.45900000000002,114.04780000000001,113.78280000000001,113.5628,113.3728,113.0116,112.858,112.73939999999999,112.4378,112.2092,111.85299999999998,111.52059999999999,111.17179999999999,110.73059999999998,109.95319999999998,109.1258,108.2682,107.43439999999998,106.47679999999997,106.008,105.35919999999999,104.69919999999998,103.80299999999998,102.548,101.423,100.23300000000002,99.40920000000003,98.40540000000003,97.20780000000003,95.83020000000003,94.32880000000003,92.78620000000002,92.91980000000002,93.26860000000002,93.66120000000002,93.72240000000002,93.57860000000002,93.57620000000003,93.4338,93.30499999999999,93.06739999999999,92.77739999999999,92.4438,92.07,91.74739999999998,91.35859999999998,91.04739999999998,90.65859999999999,90.49359999999999,90.35619999999999,90.09999999999998,89.8,89.515,89.09880000000001,88.60140000000001,88.11380000000003,87.58880000000003,87.15620000000004,86.64040000000004,86.00660000000003,85.45160000000003,84.70900000000003,83.93280000000003,83.40540000000003,82.97540000000004,82.62040000000002,82.1454,81.60419999999999,81.12559999999999,79.95319999999997,78.69319999999998,77.342,76.04199999999999,74.66459999999998,73.57220000000001,72.6772,71.766,71.04719999999999,70.3622,69.7186,68.9424,68.0574,67.2038,66.10379999999999,65.07000000000002,64.42000000000003,64.0314,63.576400000000014,63.42500000000002,63.38260000000001,63.34880000000001,63.462600000000016,63.62180000000001,63.65740000000001,63.69940000000001,63.65500000000001,63.565000000000005,63.325399999999995,63.062,62.9432,62.8182,62.8512,62.852399999999996,62.712999999999994,62.6308,62.528800000000004,62.3626,62.217400000000005,62.074600000000004,61.9176,61.863,61.745999999999995,61.6944,61.54500000000001,61.3188,61.11180000000001,61.00840000000001,60.8552,60.76060000000001,60.943000000000005,61.1484,61.4488,61.876599999999996,62.35779999999999,62.72599999999999,63.0134,63.1714,63.26359999999999,63.3694,63.4628,63.5698,63.647800000000004,63.7186,63.744600000000005,63.88080000000001,64.02860000000001,64.18460000000002,64.26980000000002,64.23240000000001,63.969800000000006,63.74600000000001,63.475,63.11700000000001,62.74640000000001,62.32920000000001,62.043000000000006,61.64440000000001,61.30220000000001,60.96520000000002,60.61020000000002,60.334600000000016,60.00180000000002,59.71520000000002,59.443000000000005,59.0964,58.693,58.343599999999995,58.065,57.92399999999999,57.860400000000006,57.69039999999999,57.6526,57.5874,57.38219999999999,57.15959999999999,56.877,56.610400000000006,56.4454,56.19480000000001,55.93980000000001,55.747600000000006,55.59720000000001,55.40500000000001,55.20980000000001,54.96840000000002,54.661000000000016,54.343800000000016,54.031000000000006,53.784800000000004,53.6272,53.403200000000005,53.187200000000004,52.931799999999996,52.70360000000001,52.442200000000014,51.655800000000006,50.88,50.142199999999995,49.4332,48.847199999999994,48.221999999999994,47.579800000000006,47.03380000000001,46.552600000000005,46.056000000000004,45.45740000000001,44.91940000000001,44.41260000000001,43.857400000000005,43.244600000000005,42.6724,42.07140000000001,41.501000000000005,40.976400000000005,40.51520000000001,40.15440000000001,39.804,39.3794,38.902800000000006,38.370000000000005,37.899200000000015,37.46720000000001,37.03940000000001,36.65780000000001,36.31960000000001,36.04340000000001,35.62980000000001,35.1484,34.673,34.1916,33.62180000000001,33.010799999999996,32.368399999999994,31.724799999999995,31.117599999999996,30.581799999999998,30.040599999999998,29.514200000000002,28.985600000000005,28.411400000000004,27.931200000000004,27.487400000000004,27.094400000000004,26.732400000000005,26.319400000000005,26.368400000000005,26.426200000000005,26.486400000000007,26.519800000000007,26.515400000000007,26.529600000000006,26.520400000000006,26.537000000000003,26.544000000000004,26.549200000000003,26.530400000000004,26.554000000000002,26.5652,26.5964,26.621399999999998,26.6658,26.6974,26.689799999999995,26.712599999999995,26.749599999999994,26.774799999999995,26.808399999999995,26.827799999999996,26.854,26.903,26.961999999999996,26.9804,26.9904,26.966799999999996,26.9492,26.892200000000006,26.878200000000007,26.846800000000005,26.814400000000003,26.80080000000001,26.828400000000006,26.865400000000008,26.89820000000001,26.947600000000005,27.031600000000005,27.11680000000001,27.134400000000003,27.13340000000001,27.130800000000004,27.1282,27.1184,27.105399999999996,27.0836,27.0474,27.016800000000003,26.988200000000006,26.98,26.974999999999998,26.963800000000003,26.9464,26.9438,26.9546,26.955799999999993,26.924999999999994,26.900999999999996,26.88019999999999,26.828199999999992,26.794799999999995,26.778799999999997,26.767599999999995,26.754199999999997,26.735599999999994,26.731399999999997,26.717399999999998,26.659000000000002,26.5962,26.5256,26.469200000000008,26.413800000000005,26.355000000000004,26.301000000000002,26.271800000000006,26.243600000000008,26.254800000000007,26.246600000000008,26.23880000000001,26.228400000000008,26.21860000000001,26.204400000000003,26.160800000000005,26.10640000000001,26.06120000000001,25.99820000000001,25.93220000000001,25.84160000000001,25.7528,25.748800000000003,25.762400000000007,25.779200000000003,25.7928,25.813800000000008,25.82780000000001,25.831400000000006,25.830800000000007,25.83140000000001,25.85660000000001,25.87680000000001,25.878600000000006,25.91500000000001,25.956200000000003,25.985,26.0156,26.046399999999995,26.098799999999997,26.15659999999999,26.224199999999993,26.265599999999996,26.320599999999992,26.366,26.4014,26.439999999999994,26.416999999999994,26.378199999999993,26.320199999999993,26.26279999999999,26.22859999999999,26.182999999999993,26.12279999999999,26.070599999999995,26.0188,25.968999999999998,25.9214,25.855,25.7772,25.7212,25.672600000000003,25.621800000000004,25.597200000000004,25.582600000000003,25.578000000000003,25.584600000000002,25.607,25.648400000000002,25.702,25.763800000000007,25.820600000000002,25.856,25.877200000000002,25.890400000000003,25.919999999999998,25.9478,25.9888,26.0332,26.0884,26.169199999999996,26.2238,26.277200000000004,26.3418,26.410199999999996,26.4816,26.5598,26.629599999999996,26.676599999999997,26.712799999999998,26.747399999999995,26.752599999999997,26.757999999999996,26.7604,26.7758,26.791800000000002,26.819800000000004,26.909000000000002,27.013400000000004,27.1524,27.3124,27.455799999999996,27.617199999999993,27.786199999999994,27.955999999999992,28.106999999999996,28.250799999999998,28.374599999999997,28.518199999999997,28.640199999999997,28.751599999999996,28.888999999999996,28.988201999999998,29.051603999999998,29.108804,29.157004,29.221203999999997,29.258803999999998,29.294403999999993,29.328203999999992,29.34380199999999,29.365601999999992,29.393801999999994,29.430401999999994,29.459201999999998,29.575001999999998,29.728202000000003,29.807602000000006,29.907002000000006,30.001202000000006,30.069402000000007,30.16720200000001,30.27620200000001,30.404602000000004,30.50280200000001,30.568202000000003,30.63440200000001,30.69080200000001,30.770002,30.804198,30.797398000000005,30.810598000000006,30.818598000000005,30.815996000000005,30.812996000000005,30.814796000000005,30.827396000000004,30.813396000000004,30.816196000000005,30.779396000000006,30.768196000000007,30.746996000000006,30.715196000000006,30.693396000000003,30.681396000000007,30.641396000000007,30.59799600000001,30.55799600000001,30.549996000000007,30.515196000000007,30.471396000000006,30.36779600000001,30.284994000000005,30.222992,30.171992000000003,30.115792,30.102192,30.083792000000003,30.071792,30.036792000000002,29.976793999999998,29.939994,29.846393999999997,29.790993999999994,29.713993999999992,29.44339399999999,29.18079399999999,28.945393999999993,28.71019399999999,28.45799399999999,28.18719399999999,27.890193999999994,27.58839399999999,27.264593999999992,26.929393999999995,26.624193999999996,26.328593999999995,26.074993999999997,25.806593999999993,25.591797999999997,25.364598,25.138198,24.977798,24.815599999999996,24.618199999999998,24.382,24.104,23.8788,23.636799999999997,23.433799999999998,23.2088,23.005599999999998,22.804799999999997,22.635199999999998,22.440199999999997,22.267599999999998,22.105599999999992,21.95079999999999,21.78719999999999,21.66539999999999,21.579399999999993,21.541199999999996,21.503199999999996,21.4534,21.378,21.355,21.261400000000002,21.175600000000003,21.090000000000003,21.018040000000006,20.993240000000007,20.934440000000006,20.923640000000006,20.872840000000007,20.851640000000003,20.932640000000003,20.953239999999997,21.025039999999994,21.108439999999998,21.238839999999996,21.392239999999997,21.569039999999998,21.75724,21.95224,22.14944,22.366639999999997,22.581039999999998,22.78164,23.01124,23.226640000000003,23.49584,23.77104,23.957039999999996,24.138839999999995,24.339239999999997,24.57484,24.844639999999995,25.085039999999996,25.315589999999997,25.53839,25.75519,25.95499,26.15419,26.342789999999997,26.551389999999998,26.782189999999996,26.988489999999995,27.157689999999995,27.318489999999997,27.41249,27.461889999999997,27.496290000000002,27.542490000000004,27.60389,27.646739999999998,27.626339999999992,27.642739999999996,27.67014,27.715139999999998,27.757500000000004,27.780300000000004,27.774700000000003,27.7669,27.7483,27.7289,27.694899999999997,27.700099999999996,27.6846,27.6422,27.573199999999996,27.529399999999995,27.466549999999994,27.407249999999998,27.351849999999995,27.292849999999998,27.207049999999995,27.115049999999997,27.048250000000003,26.97505,26.9235,26.8763,26.817299999999996,26.810099999999995,26.812499999999993,26.8125,26.808919999999993,26.78891999999999,26.76052,26.729969999999998,26.675569999999997,26.602819999999998,26.523219999999995,26.436019999999996,26.341619999999995,26.237819999999996,26.140019999999996,26.03672,25.982919999999996,25.922719999999995,25.903319999999997,25.887919999999994,25.861919999999994,25.843919999999994,25.793219999999994,25.776669999999996,25.796469999999996,25.797069999999994,25.819669999999995,25.841869999999993,25.861269999999994,25.900869999999994,25.960869999999993,25.989869999999996,26.013269999999995,26.008469999999996,26.036469999999994,26.048069999999996,26.067369999999997,26.122169999999997,26.13197,26.118970000000004,26.13642,26.148520000000005,26.154719999999998,26.16892,26.180119999999995,26.21332,26.17892,26.118120000000005,26.064470000000004,26.012470000000008,25.97427,25.922870000000007,25.876070000000006,25.877770000000005,25.887750000000008,25.926550000000006,25.966150000000006,26.02975000000001,26.108650000000004,26.214600000000004,26.330600000000008,26.476100000000006,26.603500000000007,26.74590000000001,26.86470000000001,27.002400000000012,27.12240000000001,27.220200000000016,27.351200000000013,27.49020000000001,27.62000000000001,27.748000000000008,27.855300000000003,27.962400000000002,28.046200000000002,28.153200000000002,28.2332,28.3088,28.384999999999998,28.438100000000002,28.4779,28.5666,28.659699999999997,28.773699999999995,28.877099999999995,28.979099999999995,29.075499999999995,29.149499999999993,29.26729999999999,29.393699999999992,29.49249999999999,29.542299999999987,29.59609999999999,29.64049999999999,29.68829999999999,29.71429999999999,29.79829599999999,29.88889599999999,29.91491399999999,29.954913999999988,29.967213999999988,29.97571399999999,29.992713999999992,29.97961399999999,29.94561399999999,29.88621399999999,29.83821399999999,29.778413999999994,29.726113999999995,29.659713999999994,29.581113999999996,29.499813999999994,29.41521399999999,29.322214,29.242013999999998,29.157614,29.092214,29.04811399999999,28.973713999999998,28.909913999999997,28.885614,28.898213999999996,28.982613999999995,29.055214,29.183613999999995,29.275993999999997,29.373593999999997,29.472993999999993,29.549193999999996,29.61079399999999,29.71389399999999,29.795793999999997,29.914093999999995,29.947093999999996,29.971093999999997,29.990893999999994,30.033693999999997,30.053293999999998,30.129293999999998,30.173093999999995,30.172333999999992,30.23773399999999,30.296553999999986,30.37795399999999,30.48275399999999,30.601153999999994,30.710357999999996,30.848357999999998,31.02844,31.23004,31.454560000000004,31.67686,31.903260000000003,32.121460000000006,32.32426,32.52546,32.734660000000005,32.92786,33.09106,33.26006,33.44516000000001,33.641760000000005,33.81776,34.011160000000004,34.21076,34.41626,34.60926,34.791160000000005,35.020360000000004,35.25055999999999,35.45266,35.60104,35.73144,35.87584,35.97224,36.077659999999995,36.17625999999999,36.26525999999999,36.39605999999999,36.560359999999996,36.69406,36.84346,36.97506,37.183060000000005,37.39246,37.64845999999999,37.88446,38.10565999999999,38.274660000000004,38.502460000000006,38.78242,39.03042,39.2928,39.561299999999996,39.8341,40.079699999999995,40.30229999999999,40.46829999999999,40.63039999999999,40.797399999999996,40.97958,41.20177999999999,41.43077999999999,41.62317999999999,41.84557999999999,42.07797999999999,42.27118,42.48618,42.72298,42.930580000000006,43.13828,43.30628,43.51868,43.57428000000001,43.662880000000015,43.774080000000005,43.89318000000001,44.016180000000006,44.06018,44.08178,44.14197999999999,44.1772,44.18279999999999,44.21899999999999,44.25749999999999,44.42409999999999,44.60059999999999,44.7532,44.90029999999999,45.00869999999999,45.121299999999984,45.21049999999998,45.284899999999986,45.370899999999985,45.43429999999999,45.42849999999999,45.430699999999995,45.505900000000004,45.5607,45.5989,45.630700000000004,45.6621,45.60530000000001,45.550000000000004,45.451800000000006,45.3932,45.340999999999994,45.3392,45.37799999999999,45.3976,45.4088,45.4926,45.5538,45.6926,45.793200000000006,45.9086,46.0482,46.2132,46.336800000000004,46.4842,46.653800000000004,46.8386,46.9416,47.153400000000005,47.351,47.57539999999999,47.70149999999999,47.83449999999999,48.02369999999999,48.222100000000005,48.4051,48.647099999999995,48.91109999999999,49.16089999999999,49.440000000000005,49.571,49.710899999999995,49.791499999999985,49.82300000000001,49.89280000000001,49.9772,50.066800000000015,50.19380000000001,50.307600000000015,50.432000000000016,50.54660000000001,50.65100000000001,50.74180000000002,50.869000000000014,51.00900000000002,51.20560000000001,51.399200000000015,51.69700000000001,51.97720000000001,52.2774,52.56840000000001,52.8522,53.09760000000001,53.33120000000001,53.53760000000001,53.73940000000001,53.83800000000001,53.933600000000006,54.028400000000005,54.169,54.2594,54.3612,54.449999999999996,54.57939999999999,54.6818,54.8078,54.94420000000001,55.16240000000001,55.38540000000001,55.59640000000001,55.7486,56.000200000000014,56.30580000000002,56.54300000000002,56.79700000000001,57.048800000000014,57.279800000000016,57.49500000000001,57.70940000000002,57.895400000000016,58.106600000000014,58.31080000000001,58.58880000000001,58.89040000000001,59.210600000000014,59.558200000000014,59.92580000000001,60.247000000000014,60.56500000000001,60.93460000000001,61.36720000000001,61.77700000000001,62.15380000000001,62.53200000000001,62.836600000000004,63.09440000000001,63.4164,63.733000000000004,64.03500000000001,64.3362,64.6256,64.92200000000001,65.25420000000001,65.58800000000002,65.91900000000003,66.27320000000003,66.60540000000002,66.94680000000002,67.27360000000002,67.626,68.02800000000002,68.52380000000001,68.9996,69.46640000000001,69.9294,70.3552,70.7944,71.2128,71.707,72.1604,72.61720000000001,73.1262,73.60260000000001,74.12900000000002,74.73020000000002,75.27340000000001,75.74460000000002,76.29960000000001,76.88220000000001,77.44580000000002,78.07700000000003,78.65180000000002,79.08180000000003,79.60820000000002,80.08480000000002,80.5772,81.09720000000002,81.646,82.19539999999999,82.75019999999999,83.24219999999998,83.803,84.41879999999999,85.0272,85.65119999999999,86.2702,86.7868,87.33420000000001,87.982,88.65379999999999,89.3574,90.06839999999998,90.792,91.46480000000001,92.15320000000001,92.89360000000002,93.56960000000001,94.3472,95.11240000000001,95.85000000000001,96.5164,97.03160000000001,97.522,97.98380000000002,98.45900000000002,98.98520000000002,99.46580000000002,99.84400000000002,100.32480000000002,100.71100000000001,101.1208,101.3216,101.5374,101.77600000000001,101.95080000000002,102.26940000000002,102.64920000000002,102.86480000000002,103.09700000000001,103.40040000000002,103.68900000000002,104.04760000000002,104.51420000000002];

  let graph_plot2 = document.getElementById('div_linegraph_sma');
  Plotly.newPlot( graph_plot2, [{ x: timestamps_a, y: prices, name: "Stock Price" }], { margin: { t: 0 } } );
  Plotly.plot( graph_plot2, [{ x: timestamps_b, y: sma, name: "SMA" }], { margin: { t: 0 } } );


  // Training
  $("#div_container_trainfirst").hide();
  $("#div_container_training").show();

  document.getElementById("div_traininglog").innerHTML = "<div>Model trained</div><div>Epoch: 50 (of 50), loss: 0.03450336679816246</div><div>Epoch: 49 (of 50), loss: 0.08746889978647232</div><div>Epoch: 48 (of 50), loss: 0.12235825508832932</div><div>Epoch: 47 (of 50), loss: 0.11212839186191559</div><div>Epoch: 46 (of 50), loss: 0.05028475448489189</div><div>Epoch: 45 (of 50), loss: 0.015300695784389973</div><div>Epoch: 44 (of 50), loss: 0.0026924889534711838</div><div>Epoch: 43 (of 50), loss: 0.002561884233728051</div><div>Epoch: 42 (of 50), loss: 0.0014652956742793322</div><div>Epoch: 41 (of 50), loss: 0.0013217271771281958</div><div>Epoch: 40 (of 50), loss: 0.0030655807349830866</div><div>Epoch: 39 (of 50), loss: 0.005444769747555256</div><div>Epoch: 38 (of 50), loss: 0.005553357768803835</div><div>Epoch: 37 (of 50), loss: 0.006486714817583561</div><div>Epoch: 36 (of 50), loss: 0.004650598857551813</div><div>Epoch: 35 (of 50), loss: 0.007415720261633396</div><div>Epoch: 34 (of 50), loss: 0.008261540904641151</div><div>Epoch: 33 (of 50), loss: 0.006869967561215162</div><div>Epoch: 32 (of 50), loss: 0.007610109634697437</div><div>Epoch: 31 (of 50), loss: 0.0040054721757769585</div><div>Epoch: 30 (of 50), loss: 0.003657675813883543</div><div>Epoch: 29 (of 50), loss: 0.002818638924509287</div><div>Epoch: 28 (of 50), loss: 0.002496731234714389</div><div>Epoch: 27 (of 50), loss: 0.0032212012447416782</div><div>Epoch: 26 (of 50), loss: 0.007728812284767628</div><div>Epoch: 25 (of 50), loss: 0.012824371457099915</div><div>Epoch: 24 (of 50), loss: 0.020290391519665718</div><div>Epoch: 23 (of 50), loss: 0.011541156098246574</div><div>Epoch: 22 (of 50), loss: 0.009518957696855068</div><div>Epoch: 21 (of 50), loss: 0.013500338420271873</div><div>Epoch: 20 (of 50), loss: 0.04174267500638962</div><div>Epoch: 19 (of 50), loss: 0.08119461685419083</div><div>Epoch: 18 (of 50), loss: 0.044394541531801224</div><div>Epoch: 17 (of 50), loss: 0.07642599940299988</div><div>Epoch: 16 (of 50), loss: 0.15503166615962982</div><div>Epoch: 15 (of 50), loss: 0.11092785000801086</div><div>Epoch: 14 (of 50), loss: 0.08086691051721573</div><div>Epoch: 13 (of 50), loss: 0.1177196353673935</div><div>Epoch: 12 (of 50), loss: 0.1853371262550354</div><div>Epoch: 11 (of 50), loss: 0.3289039134979248</div><div>Epoch: 10 (of 50), loss: 0.3667738139629364</div><div>Epoch: 9 (of 50), loss: 0.5904757380485535</div><div>Epoch: 8 (of 50), loss: 1.4654392004013062</div><div>Epoch: 7 (of 50), loss: 4.224607944488525</div><div>Epoch: 6 (of 50), loss: 4.776238918304443</div><div>Epoch: 5 (of 50), loss: 6.680339336395264</div><div>Epoch: 4 (of 50), loss: 7.463838577270508</div><div>Epoch: 3 (of 50), loss: 7.559423446655273</div><div>Epoch: 2 (of 50), loss: 7.704190254211426</div><div>Epoch: 1 (of 50), loss: 14.499640464782715</div>";

  let loss = [14.499640464782715, 7.704190254211426, 7.559423446655273, 7.463838577270508, 6.680339336395264, 4.776238918304443, 4.224607944488525, 1.4654392004013062, 0.5904757380485535, 0.3667738139629364, 0.3289039134979248, 0.1853371262550354, 0.1177196353673935, 0.08086691051721573, 0.11092785000801086, 0.15503166615962982, 0.07642599940299988, 0.044394541531801224, 0.08119461685419083, 0.04174267500638962, 0.013500338420271873, 0.009518957696855068, 0.011541156098246574, 0.020290391519665718, 0.012824371457099915, 0.007728812284767628, 0.0032212012447416782, 0.002496731234714389, 0.002818638924509287, 0.003657675813883543, 0.0040054721757769585, 0.007610109634697437, 0.006869967561215162, 0.008261540904641151, 0.007415720261633396, 0.004650598857551813, 0.006486714817583561, 0.005553357768803835, 0.005444769747555256, 0.0030655807349830866, 0.0013217271771281958, 0.0014652956742793322, 0.002561884233728051, 0.0026924889534711838, 0.015300695784389973, 0.05028475448489189, 0.11212839186191559, 0.12235825508832932, 0.08746889978647232, 0.03450336679816246];
  let graph_plot3 = document.getElementById('div_linegraph_trainloss');
  Plotly.newPlot( graph_plot3, [{x: Array.from({length: loss.length}, (v, k) => k+1), y: loss, name: "Loss" }], { margin: { t: 0 } } );

  // Predict
  $("#div_container_validating").show();
  $("#div_container_validatefirst").hide();
  $("#div_container_predict").show();
  $("#div_container_predictfirst").hide();

  let pred_vals = [30.880271911621094,30.756319046020508,30.686813354492188,30.574687957763672,30.455322265625,30.414691925048828,30.37146759033203,30.261669158935547,30.20035743713379,30.206077575683594,30.166099548339844,30.20769500732422,30.27951431274414,30.41089630126953,30.460186004638672,30.54753875732422,30.661399841308594,30.743816375732422,30.833511352539062,30.9290771484375,30.962936401367188,31.101303100585938,31.168331146240234,31.2198543548584,31.229721069335938,31.20906639099121,31.213064193725586,31.356426239013672,31.342777252197266,31.393301010131836,31.59113121032715,31.525972366333008,31.621606826782227,31.75960922241211,31.942041397094727,32.01454544067383,32.187103271484375,32.330772399902344,32.529823303222656,32.76789855957031,33.018367767333984,33.3780632019043,33.553916931152344,33.76907730102539,34.15032196044922,34.301998138427734,34.50977325439453,34.76121520996094,34.92772674560547,35.17820739746094,35.31208419799805,35.566749572753906,35.8206787109375,35.98015213012695,36.20620346069336,36.523746490478516,36.84674072265625,37.05519104003906,37.301300048828125,37.620601654052734,37.84638977050781,38.01282501220703,38.09479522705078,38.280982971191406,38.35297393798828,38.43777084350586,38.594451904296875,38.667816162109375,38.75531005859375,38.89814376831055,38.97129821777344,39.05295181274414,39.204559326171875,39.47739791870117,39.669960021972656,39.878623962402344,40.08940124511719,40.33586502075195,40.57581329345703,40.74138641357422,41.0075569152832,41.375431060791016,41.680908203125,41.960845947265625,42.22312927246094,42.50804901123047,42.66658401489258,42.84552001953125,42.99861145019531,43.168792724609375,43.45603561401367,43.61700439453125,43.73627471923828,43.91419219970703,44.07825469970703,44.18304443359375,44.3232307434082,44.530033111572266,44.719879150390625,44.87042999267578,44.992645263671875,45.0815544128418,45.12534713745117,45.2662353515625,45.343135833740234,45.42549514770508,45.51020050048828,45.5604362487793,45.52619171142578,45.54057693481445,45.56728744506836,45.52531433105469,45.5361328125,45.63299560546875,45.79121017456055,45.892333984375,45.945945739746094,45.98936080932617,46.11119842529297,46.242759704589844,46.43060302734375,46.5166015625,46.54617691040039,46.666160583496094,46.76640319824219,46.761775970458984,46.80170440673828,46.80610275268555,46.9254150390625,47.066837310791016,47.09339141845703,46.92963409423828,46.78635025024414,46.73648452758789,46.729705810546875,46.661563873291016,46.7149772644043,46.705623626708984,46.72129821777344,46.774566650390625,46.75042724609375,46.68595886230469,46.75973892211914,46.85142517089844,47.08014678955078,47.18641662597656,47.31884765625,47.4283561706543,47.51057052612305,47.77496337890625,47.972713470458984,48.159950256347656,48.45866394042969,48.67660903930664,48.92796325683594,49.066158294677734,49.18317794799805,49.41706848144531,49.58464050292969,49.8792610168457,50.19385528564453,50.43202209472656,50.67279052734375,50.90032958984375,51.030662536621094,51.28118133544922,51.25638961791992,51.18509292602539,51.2841796875,51.58414840698242,51.68943405151367,51.82469177246094,52.018646240234375,52.30309295654297,52.437904357910156,52.5025520324707,52.50343704223633,52.67753982543945,52.89822006225586,53.123191833496094,53.378143310546875,53.666412353515625,53.97718048095703,54.40963363647461,54.72990036010742,55.11106872558594,55.38372802734375,55.635562896728516,55.90629959106445,56.144630432128906,56.22854232788086,56.215980529785156,56.40325927734375,56.66118240356445,56.82145690917969,56.85955047607422,56.942962646484375,56.99225997924805,57.04667663574219,57.15597152709961,57.28193664550781,57.53727340698242,57.82605743408203,58.00026321411133,58.20689392089844,58.41453170776367,58.68281555175781,58.94514083862305,59.298439025878906,59.544097900390625,59.760581970214844,60.02550506591797,60.27372360229492,60.41106414794922,60.568790435791016,60.84344482421875,61.19293975830078,61.475502014160156,61.77536392211914,62.11832046508789,62.48077392578125,62.79522705078125,62.98173904418945,63.213043212890625,63.37208557128906,63.52775573730469,63.693729400634766,63.85213851928711,63.9803466796875,64.12062072753906,64.2698745727539,64.37870025634766,64.56656646728516,64.71669006347656,64.7764892578125,64.91265106201172,65.09387969970703,65.24221801757812,65.49956512451172,65.70816802978516,65.9053955078125,66.29393768310547,66.71062469482422,67.01133728027344,67.4754638671875,67.97905731201172,68.535400390625,69.02253723144531,69.55972290039062,70.10680389404297,70.77141571044922,71.19349670410156,71.56824493408203,72.18843841552734,72.9797592163086,73.35125732421875,73.95635986328125,74.63835906982422,75.18717956542969,75.71568298339844,76.21609497070312,76.84970092773438,77.4169692993164,77.84510803222656,78.39065551757812,78.97591400146484,79.19047546386719,79.84211730957031,80.42247009277344,80.79270935058594,81.2449951171875,81.783935546875,82.43667602539062,82.80691528320312,83.5166015625,84.00643157958984,84.6805419921875,85.09359741210938,85.83428192138672,86.22526550292969,86.8936538696289,87.42919158935547,88.2710189819336,88.59133911132812,89.49034118652344,90.17452239990234,90.95657348632812,91.80858612060547,92.77892303466797,93.41511535644531,93.97193908691406,95.03366088867188,95.86787414550781,96.5250473022461,97.7267074584961,98.05516052246094,98.6817626953125,99.36229705810547,100.12251281738281,100.84461975097656,102.02446746826172,101.94588470458984,102.87344360351562,103.40447998046875,103.91737365722656,104.42435455322266,105.12798309326172,105.23710632324219,105.26176452636719,106.34766387939453,105.83409118652344,106.69884490966797,107.10527038574219,107.45672607421875,107.5394287109375,108.3371353149414,108.50577545166016];

  let timestamps_c = ["2013-02-22","2013-03-01","2013-03-08","2013-03-15","2013-03-22","2013-03-28","2013-04-05","2013-04-12","2013-04-19","2013-04-26","2013-05-03","2013-05-10","2013-05-17","2013-05-24","2013-05-31","2013-06-07","2013-06-14","2013-06-21","2013-06-28","2013-07-05","2013-07-12","2013-07-19","2013-07-26","2013-08-02","2013-08-09","2013-08-16","2013-08-23","2013-08-30","2013-09-06","2013-09-13","2013-09-20","2013-09-27","2013-10-04","2013-10-11","2013-10-18","2013-10-25","2013-11-01","2013-11-08","2013-11-15","2013-11-22","2013-11-29","2013-12-06","2013-12-13","2013-12-20","2013-12-27","2014-01-03","2014-01-10","2014-01-17","2014-01-24","2014-01-31","2014-02-07","2014-02-14","2014-02-21","2014-02-28","2014-03-07","2014-03-14","2014-03-21","2014-03-28","2014-04-04","2014-04-11","2014-04-17","2014-04-25","2014-05-02","2014-05-09","2014-05-16","2014-05-23","2014-05-30","2014-06-06","2014-06-13","2014-06-20","2014-06-27","2014-07-03","2014-07-11","2014-07-18","2014-07-25","2014-08-01","2014-08-08","2014-08-15","2014-08-22","2014-08-29","2014-09-05","2014-09-12","2014-09-19","2014-09-26","2014-10-03","2014-10-10","2014-10-17","2014-10-24","2014-10-31","2014-11-07","2014-11-14","2014-11-21","2014-11-28","2014-12-05","2014-12-12","2014-12-19","2014-12-26","2015-01-02","2015-01-09","2015-01-16","2015-01-23","2015-01-30","2015-02-06","2015-02-13","2015-02-20","2015-02-27","2015-03-06","2015-03-13","2015-03-20","2015-03-27","2015-04-02","2015-04-10","2015-04-17","2015-04-24","2015-05-01","2015-05-08","2015-05-15","2015-05-22","2015-05-29","2015-06-05","2015-06-12","2015-06-19","2015-06-26","2015-07-02","2015-07-10","2015-07-17","2015-07-24","2015-07-31","2015-08-07","2015-08-14","2015-08-21","2015-08-28","2015-09-04","2015-09-11","2015-09-18","2015-09-25","2015-10-02","2015-10-09","2015-10-16","2015-10-23","2015-10-30","2015-11-06","2015-11-13","2015-11-20","2015-11-27","2015-12-04","2015-12-11","2015-12-18","2015-12-24","2015-12-31","2016-01-08","2016-01-15","2016-01-22","2016-01-29","2016-02-05","2016-02-12","2016-02-19","2016-02-26","2016-03-04","2016-03-11","2016-03-18","2016-03-24","2016-04-01","2016-04-08","2016-04-15","2016-04-22","2016-04-29","2016-05-06","2016-05-13","2016-05-20","2016-05-27","2016-06-03","2016-06-10","2016-06-17","2016-06-24","2016-07-01","2016-07-08","2016-07-15","2016-07-22","2016-07-29","2016-08-05","2016-08-12","2016-08-19","2016-08-26","2016-09-02","2016-09-09","2016-09-16","2016-09-23","2016-09-30","2016-10-07","2016-10-14","2016-10-21","2016-10-28","2016-11-04","2016-11-11","2016-11-18","2016-11-25","2016-12-02","2016-12-09","2016-12-16","2016-12-23","2016-12-30","2017-01-06","2017-01-13","2017-01-20","2017-01-27","2017-02-03","2017-02-10","2017-02-17","2017-02-24","2017-03-03","2017-03-10","2017-03-17","2017-03-24","2017-03-31","2017-04-07","2017-04-13","2017-04-21","2017-04-28","2017-05-05","2017-05-12","2017-05-19","2017-05-26","2017-06-02","2017-06-09","2017-06-16","2017-06-23","2017-06-30","2017-07-07","2017-07-14","2017-07-21","2017-07-28","2017-08-04","2017-08-11","2017-08-18","2017-08-25","2017-09-01","2017-09-08","2017-09-15","2017-09-22","2017-09-29","2017-10-06","2017-10-13","2017-10-20","2017-10-27","2017-11-03","2017-11-10","2017-11-17","2017-11-24","2017-12-01","2017-12-08","2017-12-15","2017-12-22","2017-12-29","2018-01-05","2018-01-12","2018-01-19","2018-01-26","2018-02-02","2018-02-09","2018-02-16","2018-02-23","2018-03-02","2018-03-09","2018-03-16","2018-03-23","2018-03-29","2018-04-06","2018-04-13","2018-04-20","2018-04-27","2018-05-04","2018-05-11","2018-05-18","2018-05-25","2018-06-01","2018-06-08","2018-06-15","2018-06-22","2018-06-29","2018-07-06","2018-07-13","2018-07-20","2018-07-27","2018-08-03","2018-08-10","2018-08-17","2018-08-24","2018-08-31","2018-09-07","2018-09-14","2018-09-21","2018-09-28","2018-10-05","2018-10-12","2018-10-19","2018-10-26","2018-11-02","2018-11-09","2018-11-16","2018-11-23","2018-11-30","2018-12-07","2018-12-14","2018-12-21","2018-12-28","2019-01-04","2019-01-11","2019-01-18","2019-01-25","2019-02-01","2019-02-08","2019-02-15","2019-02-22","2019-03-01","2019-03-08"];

  let graph_plot4 = document.getElementById('div_validation_graph');
  Plotly.newPlot( graph_plot4, [{ x: timestamps_a, y: prices, name: "Actual Price" }], { margin: { t: 0 } } );
  Plotly.plot( graph_plot4, [{ x: timestamps_b, y: sma, name: "Training Label (SMA)" }], { margin: { t: 0 } } );
  Plotly.plot( graph_plot4, [{ x: timestamps_c, y: pred_vals, name: "Predicted" }], { margin: { t: 0 } } );
}

function csvJSON(csv) {

   var lines = csv.split("\n");

   var result = [];

   // NOTE: If your columns contain commas in their values, you'll need
   // to deal with those before doing the next step 
   // (you might convert them to &&& or something, then covert them back later)
   // jsfiddle showing the issue https://jsfiddle.net/
   var headers = lines[0].split(",");

   for (var i = 1; i < lines.length; i++) {

      var obj = {};
      var currentline = lines[i].split(",");

      for (var j = 0; j < headers.length; j++) {
         obj[headers[j]] = currentline[j];
      }

      result.push(obj);

   }

   //return result; //JavaScript object
   return JSON.stringify(result); //JSON
}


